<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- Meta tags to prevent caching locally -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <title>High-Roller Trivia: Platinum Edition</title>
    
    <!-- External Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <!-- ANTI-CACHE SCRIPT -->
    <script>
        if ('serviceWorker' in navigator) {
            try {
                navigator.serviceWorker.getRegistrations().then(function(registrations) {
                    for(let registration of registrations) {
                        registration.unregister();
                    }
                }).catch(function(e){ console.log("SW cleanup skipped"); });
            } catch (e) { console.log("SW API restricted"); }
        }
    </script>
    
    <style>
        :root {
            --deep-navy: #020617;
            --midnight: #0f172a;
            --silver-light: #f1f5f9;
            --silver-dark: #94a3b8;
            --accent-cyan: #06b6d4;
            --accent-pink: #ec4899;
            --glass-panel: rgba(15, 23, 42, 0.95);
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--deep-navy);
            background-image: linear-gradient(to bottom, rgba(2, 6, 23, 0.9), rgba(15, 23, 42, 0.95)), url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23334155' fill-opacity='0.15'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            color: var(--silver-light);
            margin: 0; padding: 0;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        .text-metallic {
            background: linear-gradient(to bottom, #fff, #cbd5e1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0px 2px 4px rgba(0,0,0,0.3);
        }

        .glass-panel {
            background: var(--glass-panel);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(148, 163, 184, 0.2);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .btn-silver {
            background: linear-gradient(180deg, #f8fafc 0%, #cbd5e1 100%);
            color: #0f172a;
            position: relative;
            overflow: hidden;
            transition: all 0.2s;
            border: 1px solid #94a3b8;
        }
        .btn-silver:active { transform: scale(0.98); }
        .btn-silver:hover { transform: translateY(-1px); box-shadow: 0 0 15px rgba(255, 255, 255, 0.3); }
        .btn-silver::after {
            content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background: linear-gradient(to bottom right, rgba(255,255,255,0) 0%, rgba(255,255,255,0.5) 50%, rgba(255,255,255,0) 100%);
            transform: rotate(45deg); transition: transform 0.5s; opacity: 0;
        }
        .btn-silver:hover::after { opacity: 1; transform: rotate(45deg) translate(50%, 50%); transition: 0.5s; }

        .nhie-card {
            background: linear-gradient(135deg, #be185d 0%, #831843 100%);
            border: 2px solid #fbcfe8;
            box-shadow: 0 0 40px rgba(190, 24, 93, 0.4);
            animation: pulse-glow 2s infinite;
        }
        @keyframes pulse-glow {
            0% { box-shadow: 0 0 20px rgba(190, 24, 93, 0.2); }
            50% { box-shadow: 0 0 40px rgba(190, 24, 93, 0.6); }
            100% { box-shadow: 0 0 20px rgba(190, 24, 93, 0.2); }
        }

        .input-dark {
            background: rgba(2, 6, 23, 0.6);
            border: 1px solid rgba(148, 163, 184, 0.3);
            color: white;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        .input-dark:focus { border-color: var(--accent-cyan); box-shadow: 0 0 0 2px rgba(6, 182, 212, 0.2); }

        .opt-btn { position: relative; z-index: 10; }
        .hidden { display: none !important; } 
        
        .theme-gif {
            max-height: 150px;
            object-fit: contain;
            margin: 0 auto 1rem auto;
            border-radius: 0.5rem;
            box-shadow: 0 0 20px rgba(6, 182, 212, 0.3);
            border: 1px solid rgba(6, 182, 212, 0.3);
        }

        /* WHEEL CSS */
        .wheel-wrapper { position: relative; width: 320px; height: 320px; margin: 0 auto; }
        .wheel-pointer {
            position: absolute; top: -15px; left: 50%; transform: translateX(-50%);
            width: 0; height: 0; 
            border-left: 20px solid transparent; border-right: 20px solid transparent; border-top: 30px solid #ffffff;
            z-index: 20; filter: drop-shadow(0 4px 2px rgba(0,0,0,0.5));
        }
        .wheel {
            width: 100%; height: 100%; border-radius: 50%; border: 4px solid #cbd5e1;
            position: relative; overflow: hidden;
            transition: transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99);
            box-shadow: 0 0 50px rgba(6, 182, 212, 0.2);
            background: conic-gradient(#be185d 0% 12.5%, #0f172a 12.5% 25%, #be185d 25% 37.5%, #0f172a 37.5% 50%, #be185d 50% 62.5%, #0f172a 62.5% 75%, #be185d 75% 87.5%, #0f172a 87.5% 100%);
        }
        .wheel-text {
            position: absolute; top: 50%; left: 50%; width: 50%; height: 20px;
            transform-origin: 0 50%; display: flex; align-items: center; justify-content: flex-end;
            padding-right: 20px; color: white; font-weight: bold; font-size: 12px;
            text-transform: uppercase; text-shadow: 1px 1px 2px black; pointer-events: none;
        }
        #wheel-result-overlay {
            position: absolute; inset: 0; background: rgba(2, 6, 23, 0.90);
            backdrop-filter: blur(8px); display: flex; align-items: center; justify-content: center;
            z-index: 50; border-radius: 1rem;
        }
        .result-card {
            background: linear-gradient(135deg, #be185d, #881337); padding: 2rem;
            border-radius: 1rem; border: 2px solid #fbcfe8;
            box-shadow: 0 0 50px rgba(244, 63, 94, 0.5); text-align: center;
            animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }
        @keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        
        /* Toast Notification */
        #toast-container {
            position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
            z-index: 1000; pointer-events: none;
        }
        .toast {
            background: rgba(15, 23, 42, 0.95); color: white;
            padding: 12px 24px; border-radius: 8px; border: 1px solid #06b6d4;
            box-shadow: 0 4px 12px rgba(0,0,0,0.5);
            margin-bottom: 10px; font-weight: bold; text-align: center;
            opacity: 0; transition: opacity 0.3s ease-in-out;
        }
        .toast.show { opacity: 1; }

        .modal-backdrop {
            position: fixed; inset: 0; background: rgba(0,0,0,0.9); 
            backdrop-filter: blur(8px); z-index: 60;
            display: flex; align-items: center; justify-content: center;
            opacity: 0; pointer-events: none; transition: opacity 0.3s;
        }
        .modal-backdrop.active { opacity: 1; pointer-events: all; }
    </style>
<style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{inset:0px}.bottom-0{bottom:0px}.bottom-8{bottom:2rem}.left-0{left:0px}.right-0{right:0px}.right-4{right:1rem}.top-4{top:1rem}.z-10{z-index:10}.z-40{z-index:40}.z-\[100\]{z-index:100}.z-\[70\]{z-index:70}.col-span-2{grid-column:span 2 / span 2}.m-4{margin:1rem}.mx-auto{margin-left:auto;margin-right:auto}.mb-1{margin-bottom:0.25rem}.mb-10{margin-bottom:2.5rem}.mb-2{margin-bottom:0.5rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.mt-4{margin-top:1rem}.mb-3{margin-bottom:0.75rem}.block{display:block}.flex{display:flex}.inline-flex{display:inline-flex}.grid{display:grid}.hidden{display:none}.h-1{height:0.25rem}.h-10{height:2.5rem}.h-12{height:3rem}.h-24{height:6rem}.h-4{height:1rem}.h-5{height:1.25rem}.max-h-48{max-height:12rem}.min-h-\[60px\]{min-height:60px}.min-h-screen{min-height:100vh}.w-10{width:2.5rem}.w-12{width:3rem}.w-20{width:5rem}.w-24{width:6rem}.w-32{width:8rem}.w-4{width:1rem}.w-5{width:1.25rem}.w-full{width:100%}.max-w-5xl{max-width:64rem}.max-w-lg{max-width:32rem}.flex-shrink-0{flex-shrink:0}.flex-grow{flex-grow:1}.translate-y-full{--tw-translate-y:100%;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-95{--tw-scale-x:.95;--tw-scale-y:.95;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.cursor-pointer{cursor:pointer}.grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.grid-cols-3{grid-template-columns:repeat(3, minmax(0, 1fr))}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-2{gap:0.5rem}.gap-3{gap:0.75rem}.gap-4{gap:1rem}.space-y-2 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.5rem * var(--tw-space-y-reverse))}.space-y-4 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.rounded{border-radius:0.25rem}.rounded-2xl{border-radius:1rem}.rounded-full{border-radius:9999px}.rounded-none{border-radius:0px}.rounded-sm{border-radius:0.125rem}.border{border-width:1px}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-l-4{border-left-width:4px}.border-t{border-top-width:1px}.border-t-4{border-top-width:4px}.border-dashed{border-style:dashed}.border-cyan-500{--tw-border-opacity:1;border-color:rgb(6 182 212 / var(--tw-border-opacity, 1))}.border-green-900\/50{border-color:rgb(20 83 45 / 0.5)}.border-pink-500{--tw-border-opacity:1;border-color:rgb(236 72 153 / var(--tw-border-opacity, 1))}.border-purple-500{--tw-border-opacity:1;border-color:rgb(168 85 247 / var(--tw-border-opacity, 1))}.border-slate-600{--tw-border-opacity:1;border-color:rgb(71 85 105 / var(--tw-border-opacity, 1))}.border-slate-700{--tw-border-opacity:1;border-color:rgb(51 65 85 / var(--tw-border-opacity, 1))}.border-slate-800{--tw-border-opacity:1;border-color:rgb(30 41 59 / var(--tw-border-opacity, 1))}.border-transparent{border-color:transparent}.border-yellow-900\/30{border-color:rgb(113 63 18 / 0.3)}.bg-cyan-500\/10{background-color:rgb(6 182 212 / 0.1)}.bg-slate-800\/50{background-color:rgb(30 41 59 / 0.5)}.bg-slate-900{--tw-bg-opacity:1;background-color:rgb(15 23 42 / var(--tw-bg-opacity, 1))}.bg-slate-950{--tw-bg-opacity:1;background-color:rgb(2 6 23 / var(--tw-bg-opacity, 1))}.bg-slate-950\/95{background-color:rgb(2 6 23 / 0.95)}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-white\/50{background-color:rgb(255 255 255 / 0.5)}.bg-yellow-900\/10{background-color:rgb(113 63 18 / 0.1)}.bg-slate-800{--tw-bg-opacity:1;background-color:rgb(30 41 59 / var(--tw-bg-opacity, 1))}.bg-gradient-to-br{background-image:linear-gradient(to bottom right, var(--tw-gradient-stops))}.bg-gradient-to-r{background-image:linear-gradient(to right, var(--tw-gradient-stops))}.from-pink-400{--tw-gradient-from:#f472b6 var(--tw-gradient-from-position);--tw-gradient-to:rgb(244 114 182 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-slate-700{--tw-gradient-from:#334155 var(--tw-gradient-from-position);--tw-gradient-to:rgb(51 65 85 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-transparent{--tw-gradient-from:transparent var(--tw-gradient-from-position);--tw-gradient-to:rgb(0 0 0 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.via-cyan-500{--tw-gradient-to:rgb(6 182 212 / 0)  var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), #06b6d4 var(--tw-gradient-via-position), var(--tw-gradient-to)}.to-purple-400{--tw-gradient-to:#c084fc var(--tw-gradient-to-position)}.to-slate-900{--tw-gradient-to:#0f172a var(--tw-gradient-to-position)}.to-transparent{--tw-gradient-to:transparent var(--tw-gradient-to-position)}.bg-clip-text{-webkit-background-clip:text;background-clip:text}.p-2\.5{padding:0.625rem}.p-3{padding:0.75rem}.p-4{padding:1rem}.p-8{padding:2rem}.px-12{padding-left:3rem;padding-right:3rem}.px-4{padding-left:1rem;padding-right:1rem}.px-8{padding-left:2rem;padding-right:2rem}.py-3{padding-top:0.75rem;padding-bottom:0.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.pb-1{padding-bottom:0.25rem}.pb-32{padding-bottom:8rem}.pb-4{padding-bottom:1rem}.text-center{text-align:center}.font-mono{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-5xl{font-size:3rem;line-height:1}.text-\[10px\]{font-size:10px}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:0.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:0.75rem;line-height:1rem}.font-black{font-weight:900}.font-bold{font-weight:700}.font-light{font-weight:300}.uppercase{text-transform:uppercase}.leading-none{line-height:1}.leading-tight{line-height:1.25}.tracking-\[0\.3em\]{letter-spacing:0.3em}.tracking-tighter{letter-spacing:-0.05em}.tracking-widest{letter-spacing:0.1em}.tracking-\[0\.2em\]{letter-spacing:0.2em}.text-cyan-400{--tw-text-opacity:1;color:rgb(34 211 238 / var(--tw-text-opacity, 1))}.text-cyan-500{--tw-text-opacity:1;color:rgb(6 182 212 / var(--tw-text-opacity, 1))}.text-green-500{--tw-text-opacity:1;color:rgb(34 197 94 / var(--tw-text-opacity, 1))}.text-pink-200{--tw-text-opacity:1;color:rgb(251 207 232 / var(--tw-text-opacity, 1))}.text-pink-500{--tw-text-opacity:1;color:rgb(236 72 153 / var(--tw-text-opacity, 1))}.text-pink-900{--tw-text-opacity:1;color:rgb(131 24 67 / var(--tw-text-opacity, 1))}.text-slate-200{--tw-text-opacity:1;color:rgb(226 232 240 / var(--tw-text-opacity, 1))}.text-slate-300{--tw-text-opacity:1;color:rgb(203 213 225 / var(--tw-text-opacity, 1))}.text-slate-400{--tw-text-opacity:1;color:rgb(148 163 184 / var(--tw-text-opacity, 1))}.text-slate-500{--tw-text-opacity:1;color:rgb(100 116 139 / var(--tw-text-opacity, 1))}.text-slate-700{--tw-text-opacity:1;color:rgb(51 65 85 / var(--tw-text-opacity, 1))}.text-transparent{color:transparent}.text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-yellow-500{--tw-text-opacity:1;color:rgb(234 179 8 / var(--tw-text-opacity, 1))}.accent-cyan-500{accent-color:#06b6d4}.opacity-0{opacity:0}.shadow-2xl{--tw-shadow:0 25px 50px -12px rgb(0 0 0 / 0.25);--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-\[0_-5px_20px_rgba\(0\2c 0\2c 0\2c 0\.5\)\]{--tw-shadow:0 -5px 20px rgba(0,0,0,0.5);--tw-shadow-colored:0 -5px 20px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-\[0_0_10px_rgba\(236\2c 72\2c 153\2c 0\.2\)\]{--tw-shadow:0 0 10px rgba(236,72,153,0.2);--tw-shadow-colored:0 0 10px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-\[0_0_20px_rgba\(255\2c 255\2c 255\2c 0\.1\)\]{--tw-shadow:0 0 20px rgba(255,255,255,0.1);--tw-shadow-colored:0 0 20px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.outline-none{outline:2px solid transparent;outline-offset:2px}.blur-\[80px\]{--tw-blur:blur(80px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.drop-shadow-2xl{--tw-drop-shadow:drop-shadow(0 25px 25px rgb(0 0 0 / 0.15));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur-xl{--tw-backdrop-blur:blur(24px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-colors{transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.duration-500{transition-duration:500ms}.duration-700{transition-duration:700ms}.hover\:scale-105:hover{--tw-scale-x:1.05;--tw-scale-y:1.05;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:border-pink-900\/30:hover{border-color:rgb(131 24 67 / 0.3)}.hover\:border-slate-700:hover{--tw-border-opacity:1;border-color:rgb(51 65 85 / var(--tw-border-opacity, 1))}.hover\:border-cyan-500:hover{--tw-border-opacity:1;border-color:rgb(6 182 212 / var(--tw-border-opacity, 1))}.hover\:border-slate-500:hover{--tw-border-opacity:1;border-color:rgb(100 116 139 / var(--tw-border-opacity, 1))}.hover\:bg-gray-200:hover{--tw-bg-opacity:1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.hover\:bg-slate-800:hover{--tw-bg-opacity:1;background-color:rgb(30 41 59 / var(--tw-bg-opacity, 1))}.hover\:text-cyan-400:hover{--tw-text-opacity:1;color:rgb(34 211 238 / var(--tw-text-opacity, 1))}.hover\:text-pink-400:hover{--tw-text-opacity:1;color:rgb(244 114 182 / var(--tw-text-opacity, 1))}.hover\:text-white:hover{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.hover\:text-yellow-400:hover{--tw-text-opacity:1;color:rgb(250 204 21 / var(--tw-text-opacity, 1))}.focus\:border-cyan-500:focus{--tw-border-opacity:1;border-color:rgb(6 182 212 / var(--tw-border-opacity, 1))}.group:hover .group-hover\:border-cyan-500{--tw-border-opacity:1;border-color:rgb(6 182 212 / var(--tw-border-opacity, 1))}.group:hover .group-hover\:text-cyan-400{--tw-text-opacity:1;color:rgb(34 211 238 / var(--tw-text-opacity, 1))}.peer:checked ~ .peer-checked\:border-cyan-400{--tw-border-opacity:1;border-color:rgb(34 211 238 / var(--tw-border-opacity, 1))}.peer:checked ~ .peer-checked\:bg-cyan-600{--tw-bg-opacity:1;background-color:rgb(8 145 178 / var(--tw-bg-opacity, 1))}.peer:checked ~ .peer-checked\:text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}@media (min-width: 768px){.md\:text-7xl{font-size:4.5rem;line-height:1}.md\:text-xl{font-size:1.25rem;line-height:1.75rem}}</style></head>
<body>

    <div id="toast-container"></div>

    <div id="splash" class="fixed inset-0 z-[100] flex flex-col items-center justify-center bg-slate-950 transition-opacity duration-700 hidden" style="background: radial-gradient(circle, rgb(30, 41, 59) 0%, rgb(2, 6, 23) 100%); opacity: 0; display: none;">
        <div class="text-center p-8 animate-float relative">
            <div class="absolute inset-0 bg-cyan-500/10 blur-[80px] rounded-full"></div>
            <div class="relative z-10 mb-6" id="splash-logo-container">
                <div class="inline-flex items-center justify-center w-24 h-24 rounded-full border-2 border-slate-600 bg-slate-900 shadow-2xl">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="gem" class="lucide lucide-gem w-12 h-12 text-cyan-400"><path d="M10.5 3 8 9l4 13 4-13-2.5-6"></path><path d="M17 3a2 2 0 0 1 1.6.8l3 4a2 2 0 0 1 .013 2.382l-7.99 10.986a2 2 0 0 1-3.247 0l-7.99-10.986A2 2 0 0 1 2.4 7.8l2.998-3.997A2 2 0 0 1 7 3z"></path><path d="M2 9h20"></path></svg>
                </div>
            </div>
            <h1 class="text-5xl md:text-7xl font-black text-metallic mb-2 tracking-tighter uppercase drop-shadow-2xl">HIGH ROLLER</h1>
            <div class="h-1 w-32 mx-auto bg-gradient-to-r from-transparent via-cyan-500 to-transparent mb-4"></div>
            <p class="text-slate-400 text-lg md:text-xl mb-10 tracking-[0.3em] uppercase font-light">Premium Adult Trivia</p>
            <button type="button" id="btn-enter" class="btn-silver py-4 px-12 rounded-sm font-bold text-lg shadow-[0_0_20px_rgba(255,255,255,0.1)] flex items-center gap-3 mx-auto tracking-widest uppercase">Enter The Lounge</button>
        </div>
        <p class="absolute bottom-8 text-slate-700 text-xs font-mono uppercase tracking-widest">v25.0 (Auto-Resume)</p>
    </div>

    <div id="app" class="min-h-screen flex flex-col max-w-5xl mx-auto p-4 pb-32">
        <header class="flex justify-between items-center py-4 mb-6 border-b border-slate-800">
            <div class="flex items-center gap-4 cursor-pointer group" onclick="Game.renderSetup()">
                <div class="w-10 h-10 rounded bg-gradient-to-br from-slate-700 to-slate-900 border border-slate-600 flex items-center justify-center shadow-lg group-hover:border-cyan-500 transition-colors" id="header-icon-container">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="crown" class="lucide lucide-crown text-cyan-400 w-5 h-5"><path d="M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z"></path><path d="M5 21h14"></path></svg>
                </div>
                <div>
                    <h2 class="font-bold text-lg leading-none text-slate-200">PLATINUM</h2>
                    <span class="text-[10px] text-cyan-500 uppercase tracking-widest font-bold">Edition</span>
                </div>
            </div>
            
            <div class="flex gap-2">
                <input type="file" id="file-upload" accept=".json" multiple="" class="hidden" onchange="Game.handleFileUpload(this)">
                <input type="file" id="gif-upload" accept="image/gif,image/webp,image/png,image/jpeg" class="hidden" onchange="Game.handleGifUpload(this)">

                <button type="button" onclick="Game.toggleWheelModal()" class="p-2.5 rounded hover:bg-slate-800 text-pink-500 hover:text-pink-400 transition border border-transparent hover:border-pink-900/30 shadow-[0_0_10px_rgba(236,72,153,0.2)]" title="Spin The Wheel"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="aperture" class="lucide lucide-aperture w-5 h-5"><circle cx="12" cy="12" r="10"></circle><path d="m14.31 8 5.74 9.94"></path><path d="M9.69 8h11.48"></path><path d="m7.38 12 5.74-9.94"></path><path d="M9.69 16 3.95 6.06"></path><path d="M14.31 16H2.83"></path><path d="m16.62 12-5.74 9.94"></path></svg></button>
                <button type="button" onclick="document.getElementById('gif-upload').click()" class="p-2.5 rounded hover:bg-slate-800 text-slate-400 hover:text-white transition border border-transparent hover:border-slate-700" title="Upload GIF"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="film" class="lucide lucide-film w-5 h-5"><rect width="18" height="18" x="3" y="3" rx="2"></rect><path d="M7 3v18"></path><path d="M3 7.5h4"></path><path d="M3 12h18"></path><path d="M3 16.5h4"></path><path d="M17 3v18"></path><path d="M17 7.5h4"></path><path d="M17 16.5h4"></path></svg></button>
                <button type="button" onclick="document.getElementById('file-upload').click()" class="p-2.5 rounded hover:bg-slate-800 text-slate-400 hover:text-cyan-400 transition border border-transparent hover:border-slate-700" title="Import JSON"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="upload-cloud" class="lucide lucide-upload-cloud w-5 h-5"><path d="M12 13v8"></path><path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"></path><path d="m8 17 4-4 4 4"></path></svg></button>
                <button type="button" onclick="Game.showDatabaseStats()" class="p-2.5 rounded hover:bg-slate-800 text-slate-400 hover:text-cyan-400 transition border border-transparent hover:border-slate-700" title="Database"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="database" class="lucide lucide-database w-5 h-5"><ellipse cx="12" cy="5" rx="9" ry="3"></ellipse><path d="M3 5V19A9 3 0 0 0 21 19V5"></path><path d="M3 12A9 3 0 0 0 21 12"></path></svg></button>
                <button type="button" onclick="Game.downloadUpdatedApp()" class="p-2.5 rounded hover:bg-slate-800 text-slate-400 hover:text-yellow-400 transition border border-transparent hover:border-slate-700" title="Save App"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="save" class="lucide lucide-save w-5 h-5"><path d="M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"></path><path d="M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"></path><path d="M7 3v4a1 1 0 0 0 1 1h7"></path></svg></button>
                <button type="button" onclick="Game.toggleMobileView()" class="p-2.5 rounded hover:bg-slate-800 text-slate-400 hover:text-white transition border border-transparent hover:border-slate-700" title="Mobile View"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="smartphone" class="lucide lucide-smartphone w-5 h-5"><rect width="14" height="20" x="5" y="2" rx="2" ry="2"></rect><path d="M12 18h.01"></path></svg></button>
                <button type="button" onclick="Game.toggleCustomModal()" class="p-2.5 rounded hover:bg-slate-800 text-slate-400 hover:text-white transition border border-transparent hover:border-slate-700" title="Add Question"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="plus" class="lucide lucide-plus w-5 h-5"><path d="M5 12h14"></path><path d="M12 5v14"></path></svg></button>
                <button type="button" id="btn-sound" class="p-2.5 rounded hover:bg-slate-800 text-slate-400 hover:text-white transition border border-transparent hover:border-slate-700"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="volume-2" class="lucide lucide-volume-2 w-5 h-5"><path d="M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"></path><path d="M16 9a5 5 0 0 1 0 6"></path><path d="M19.364 18.364a9 9 0 0 0 0-12.728"></path></svg></button>
            </div>
        </header>

        <main id="main-content" class="flex-grow flex flex-col justify-center w-full mx-auto transition-all duration-500"><div class="glass-panel p-8 max-w-lg mx-auto animate-slide-up border-t-4 border-cyan-500"><h3 class="text-3xl font-black text-center mb-8 text-white tracking-widest uppercase">Registration</h3><div id="inputs-area" class="space-y-4 mb-8"><div class="flex gap-2 items-center animate-slide-up"><label class="w-12 h-12 flex-shrink-0 bg-slate-800 border border-slate-600 rounded cursor-pointer overflow-hidden hover:border-cyan-500 transition relative group avatar-container"><input type="file" class="hidden team-img-input" accept="image/*" onchange="Game.handleTeamImage(this, 0)"><img id="team-img-0" class="team-avatar hidden"><div id="team-icon-0" class="absolute inset-0 flex items-center justify-center text-slate-500 group-hover:text-cyan-400"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="camera" class="lucide lucide-camera w-5 h-5"><path d="M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z"></path><circle cx="12" cy="13" r="3"></circle></svg></div></label><input type="text" class="w-full input-dark rounded p-3 text-lg player-input" value="Team Platinum"></div><div class="flex gap-2 items-center animate-slide-up" style="animation-delay: 0.1s"><label class="w-12 h-12 flex-shrink-0 bg-slate-800 border border-slate-600 rounded cursor-pointer overflow-hidden hover:border-cyan-500 transition relative group avatar-container"><input type="file" class="hidden team-img-input" accept="image/*" onchange="Game.handleTeamImage(this, 1)"><img id="team-img-1" class="team-avatar hidden"><div id="team-icon-1" class="absolute inset-0 flex items-center justify-center text-slate-500 group-hover:text-cyan-400"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="camera" class="lucide lucide-camera w-5 h-5"><path d="M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z"></path><circle cx="12" cy="13" r="3"></circle></svg></div></label><input type="text" class="w-full input-dark rounded p-3 text-lg player-input" value="Team Noir"></div></div><button type="button" id="add-btn" class="text-xs font-bold text-slate-400 hover:text-white mb-8 flex items-center justify-center gap-2 w-full py-3 border border-dashed border-slate-700 rounded hover:border-slate-500 transition"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="plus-circle" class="lucide lucide-plus-circle w-4 h-4"><circle cx="12" cy="12" r="10"></circle><path d="M8 12h8"></path><path d="M12 8v8"></path></svg> ADD ANOTHER TEAM</button><div class="mb-8"><label class="block text-xs font-bold text-slate-500 mb-3 uppercase tracking-widest">Winning Score</label><div class="grid grid-cols-3 gap-2"><label class="cursor-pointer"><input type="radio" name="goal" value="5" class="hidden peer"><div class="py-3 text-center border border-slate-700 bg-slate-800 peer-checked:bg-cyan-600 peer-checked:border-cyan-400 peer-checked:text-white text-slate-400 transition-all font-bold rounded-sm">5</div></label><label class="cursor-pointer"><input type="radio" name="goal" value="10" class="hidden peer" checked=""><div class="py-3 text-center border border-slate-700 bg-slate-800 peer-checked:bg-cyan-600 peer-checked:border-cyan-400 peer-checked:text-white text-slate-400 transition-all font-bold rounded-sm">10</div></label><label class="cursor-pointer"><input type="radio" name="goal" value="25" class="hidden peer"><div class="py-3 text-center border border-slate-700 bg-slate-800 peer-checked:bg-cyan-600 peer-checked:border-cyan-400 peer-checked:text-white text-slate-400 transition-all font-bold rounded-sm">25</div></label></div><button type="button" id="go-btn" class="btn-silver w-full py-4 text-xl font-black uppercase tracking-[0.2em] shadow-lg rounded-sm">Deal The Cards</button></div></div></main>
    </div>

    <div id="scoreboard" class="hidden fixed bottom-0 left-0 right-0 bg-slate-950/95 backdrop-blur-xl border-t border-slate-800 p-4 z-40 pb-safe transition-transform duration-500 shadow-[0_-5px_20px_rgba(0,0,0,0.5)] translate-y-full">
        <div id="score-container" class="max-w-5xl mx-auto flex gap-4 overflow-x-auto no-scrollbar pb-1"></div>
    </div>

    <div id="wheel-modal" class="modal-backdrop">
        <div class="glass-panel p-8 rounded-2xl w-full max-w-lg m-4 shadow-2xl border-2 border-pink-500 transform transition-all scale-95 opacity-0 flex flex-col items-center relative" id="wheel-modal-content">
            <button type="button" onclick="Game.toggleWheelModal()" class="absolute top-4 right-4 text-slate-400 hover:text-white z-[70]"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="x" class="lucide lucide-x"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg></button>
            
            <h3 class="text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-purple-400 uppercase tracking-widest mb-8 text-center">Naughty Wheel</h3>
            
            <div id="wheel-result-overlay" class="hidden">
                <div class="result-card">
                    <div class="mb-4 text-pink-200"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="flame" class="lucide lucide-flame w-12 h-12 mx-auto"><path d="M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4"></path></svg></div>
                    <h2 class="text-4xl font-black text-white mb-2 uppercase leading-none">Fate Decided!</h2>
                    <div class="h-1 w-20 mx-auto bg-white/50 mb-6 rounded-full"></div>
                    <p id="outcome-text" class="text-2xl font-bold text-white mb-8 px-4 leading-tight"></p>
                    <button type="button" onclick="Game.toggleWheelModal()" class="bg-white text-pink-900 px-8 py-3 rounded-full font-bold hover:bg-gray-200 transition-colors shadow-lg uppercase tracking-widest text-sm">I Accept</button>
                </div>
            </div>

            <div class="wheel-wrapper mb-8">
                <div class="wheel-pointer"></div>
                <div class="wheel" id="the-wheel"><div class="wheel-text" style="transform: rotate(-67.5deg);">Remove 1 Item</div><div class="wheel-text" style="transform: rotate(-22.5deg);">Take a Shot</div><div class="wheel-text" style="transform: rotate(22.5deg);">Lap Dance (30s)</div><div class="wheel-text" style="transform: rotate(67.5deg);">Truth or Dare</div><div class="wheel-text" style="transform: rotate(112.5deg);">Kiss Host</div><div class="wheel-text" style="transform: rotate(157.5deg);">Spank Left</div><div class="wheel-text" style="transform: rotate(202.5deg);">Show Tattoo</div><div class="wheel-text" style="transform: rotate(247.5deg);">Safe!</div></div>
            </div>

            <div id="wheel-controls" class="text-center min-h-[60px]">
                <button type="button" onclick="Game.spinWheel()" id="spin-btn" class="btn-silver py-3 px-12 rounded-full font-bold text-xl shadow-xl uppercase tracking-widest hover:scale-105 transition-transform">SPIN IT!</button>
            </div>
        </div>
    </div>

    <div id="db-modal" class="modal-backdrop">
        <div class="glass-panel p-8 rounded-none w-full max-w-lg m-4 shadow-2xl border-l-4 border-cyan-500 transform transition-all scale-95 opacity-0" id="db-modal-content">
            <div class="flex justify-between items-center mb-6 border-b border-slate-700 pb-4">
                <h3 class="text-xl font-bold text-white uppercase tracking-widest">Database</h3>
                <button type="button" onclick="Game.toggleDbModal()" class="text-slate-400 hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="x" class="lucide lucide-x"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg></button>
            </div>
            <div class="grid grid-cols-2 gap-4 mb-6">
                <div class="bg-slate-800/50 p-4 border border-slate-700"><div class="text-[10px] text-cyan-500 uppercase font-bold tracking-widest mb-1">Total Questions</div><div class="text-3xl font-black text-white" id="db-count">173</div></div>
                <div class="bg-slate-800/50 p-4 border border-slate-700"><div class="text-[10px] text-cyan-500 uppercase font-bold tracking-widest mb-1">Last Import</div><div class="text-sm font-bold text-slate-300 truncate" id="db-last-import"></div></div>
            </div>
            <div class="max-h-48 overflow-y-auto space-y-2 text-sm text-slate-400 mb-6" id="db-categories"><div class="flex justify-between border-b border-slate-700 pb-1"><span>Swinger Lifestyle &amp; Etiquette</span><span class="text-cyan-500">43</span></div><div class="flex justify-between border-b border-slate-700 pb-1"><span>Hotel Takeover Parties</span><span class="text-cyan-500">21</span></div><div class="flex justify-between border-b border-slate-700 pb-1"><span>General Sex Trivia</span><span class="text-cyan-500">21</span></div><div class="flex justify-between border-b border-slate-700 pb-1"><span>Sex Toys &amp; Gear</span><span class="text-cyan-500">15</span></div><div class="flex justify-between border-b border-slate-700 pb-1"><span>Masturbation</span><span class="text-cyan-500">12</span></div><div class="flex justify-between border-b border-slate-700 pb-1"><span>Lesbian Sex &amp; Culture</span><span class="text-cyan-500">12</span></div><div class="flex justify-between border-b border-slate-700 pb-1"><span>Gay Sex &amp; Culture</span><span class="text-cyan-500">12</span></div><div class="flex justify-between border-b border-slate-700 pb-1"><span>STIs &amp; Sexual Health</span><span class="text-cyan-500">11</span></div><div class="flex justify-between border-b border-slate-700 pb-1"><span>Fluid Swapping &amp; Extreme Play</span><span class="text-cyan-500">9</span></div><div class="flex justify-between border-b border-slate-700 pb-1"><span>Extreme &amp; Edge Play</span><span class="text-cyan-500">8</span></div><div class="flex justify-between border-b border-slate-700 pb-1"><span>Cheating &amp; Non-Monogamy Drama</span><span class="text-cyan-500">7</span></div><div class="flex justify-between border-b border-slate-700 pb-1"><span>Swinger Lifestyle &amp; Etiette</span><span class="text-cyan-500">2</span></div></div>
            <div class="flex items-center gap-3 text-xs text-yellow-500 bg-yellow-900/10 p-3 border border-yellow-900/30"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="alert-triangle" class="lucide lucide-alert-triangle w-4 h-4"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path></svg> Click Save icon to persist changes.</div>
        </div>
    </div>

    <div id="custom-modal" class="modal-backdrop">
        <div class="glass-panel p-8 rounded-none w-full max-w-lg m-4 shadow-2xl border-l-4 border-purple-500 transform transition-all scale-95 opacity-0" id="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-lg font-bold text-white uppercase tracking-widest">New Question</h3>
                <button type="button" onclick="Game.toggleCustomModal()" class="text-slate-400 hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="x" class="lucide lucide-x"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg></button>
            </div>
            <div class="space-y-4">
                <div class="grid grid-cols-2 gap-4">
                    <div><label class="block text-[10px] text-slate-500 uppercase font-bold mb-1">Category</label><input type="text" id="cust-cat" class="w-full input-dark rounded p-3 text-sm" value="Custom"></div>
                    <div><label class="block text-[10px] text-slate-500 uppercase font-bold mb-1">Type</label><select id="cust-type" class="w-full input-dark rounded p-3 text-sm" onchange="Game.toggleCustomType()"><option value="multi">Multiple Choice</option><option value="tf">True / False</option></select></div>
                </div>
                <div><label class="block text-[10px] text-slate-500 uppercase font-bold mb-1">Question Text</label><textarea id="cust-q" rows="2" class="w-full input-dark rounded p-3 text-sm focus:border-cyan-500 outline-none"></textarea></div>
                <div id="cust-multi-inputs" class="grid grid-cols-2 gap-3">
                    <div class="col-span-2"><label class="block text-[10px] text-green-500 uppercase font-bold mb-1">Correct Answer</label><input type="text" id="cust-ans-correct" class="w-full input-dark border-green-900/50 rounded p-3 text-sm"></div>
                    <input type="text" id="cust-ans-w1" placeholder="Wrong 1" class="w-full input-dark rounded p-3 text-sm">
                    <input type="text" id="cust-ans-w2" placeholder="Wrong 2" class="w-full input-dark rounded p-3 text-sm">
                    <input type="text" id="cust-ans-w3" placeholder="Wrong 3" class="w-full input-dark rounded p-3 text-sm">
                </div>
                <div id="cust-tf-inputs" class="hidden">
                    <div class="flex gap-4 p-4 bg-slate-800/50 rounded border border-slate-700">
                        <label class="flex items-center gap-2 cursor-pointer text-white"><input type="radio" name="cust-tf-val" value="true" checked="" class="accent-cyan-500"> True</label>
                        <label class="flex items-center gap-2 cursor-pointer text-white"><input type="radio" name="cust-tf-val" value="false" class="accent-cyan-500"> False</label>
                    </div>
                </div>
                <button type="button" onclick="Game.addCustomQuestion()" class="btn-silver w-full py-3 mt-4 font-bold uppercase tracking-widest text-sm rounded-sm">Add To Pool</button>
            </div>
        </div>
    </div>

    <script>
        const AudioSys = {
            ctx: null, enabled: true,
            init() { const AC = window.AudioContext || window.webkitAudioContext; if (AC) this.ctx = new AC(); },
            play(type) {
                if (!this.enabled || !this.ctx) return;
                if (this.ctx.state === 'suspended') this.ctx.resume();
                const now = this.ctx.currentTime;
                const osc = this.ctx.createOscillator();
                const gain = this.ctx.createGain();
                osc.connect(gain); gain.connect(this.ctx.destination);
                if (type === 'click') { osc.frequency.setValueAtTime(1200, now); osc.frequency.exponentialRampToValueAtTime(600, now + 0.05); gain.gain.setValueAtTime(0.05, now); gain.gain.linearRampToValueAtTime(0, now + 0.05); osc.start(now); osc.stop(now + 0.05); }
                else if (type === 'correct') { osc.type = 'sine'; osc.frequency.setValueAtTime(880, now); osc.frequency.setValueAtTime(1760, now + 0.1); gain.gain.setValueAtTime(0.1, now); gain.gain.exponentialRampToValueAtTime(0.001, now + 0.6); osc.start(now); osc.stop(now + 0.6); }
                else if (type === 'wrong') { osc.type = 'sawtooth'; osc.frequency.setValueAtTime(150, now); osc.frequency.linearRampToValueAtTime(100, now + 0.3); gain.gain.setValueAtTime(0.1, now); gain.gain.linearRampToValueAtTime(0, now + 0.3); osc.start(now); osc.stop(now + 0.3); }
                else if (type === 'gong') { osc.type = 'triangle'; osc.frequency.setValueAtTime(100, now); osc.frequency.exponentialRampToValueAtTime(40, now + 1); gain.gain.setValueAtTime(0.3, now); gain.gain.exponentialRampToValueAtTime(0.001, now + 1.5); osc.start(now); osc.stop(now + 1.5); }
                else if (type === 'spin') { osc.frequency.setValueAtTime(200, now); osc.frequency.linearRampToValueAtTime(800, now + 3.5); gain.gain.setValueAtTime(0.1, now); gain.gain.linearRampToValueAtTime(0, now + 4); osc.start(now); osc.stop(now + 4); }
                else if (type === 'win') { [523, 659, 783, 1046].forEach((f, i) => { const o = this.ctx.createOscillator(); const g = this.ctx.createGain(); o.connect(g); g.connect(this.ctx.destination); o.frequency.value = f; g.gain.setValueAtTime(0.1, now + i*0.1); g.gain.exponentialRampToValueAtTime(0.001, now + i*0.1 + 0.5); o.start(now + i*0.1); o.stop(now + i*0.1 + 0.5); }); }
            }
        };

        // UI HELPER: Toast Notification (Replaces Alert)
        const showToast = (message) => {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.innerText = message;
            container.appendChild(toast);
            requestAnimationFrame(() => { toast.classList.add('show'); });
            setTimeout(() => { toast.classList.remove('show'); setTimeout(() => toast.remove(), 300); }, 3000);
        };

        // --- EMPTY DATABASE FOR JSON IMPORT ---
        var MC_QUESTIONS = [{"c":"Swinger Lifestyle & Etiquette","q":"What does the swinger symbol of a black ring worn on the right hand signify?","o":["The female half is bisexual but the couple only wants soft-swap or girl-girl play.","Drug and Disease Free.","It is a discreet signal used by some swingers to identify each other in vanilla settings.","A 'vanilla with potential' or simply 'LS-friendly'."],"a":2,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"In swinger terminology, what is a 'unicorn'?","o":["A couple thats actually attractive, drama-free, and good in bed.","They smoke weed and are cool with others doing it.","The female half is bisexual but the couple only wants soft-swap or girl-girl play.","A single bisexual female who enjoys playing with couples."],"a":3,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What does 'soft swap' mean?","o":["A couple thats actually attractive, drama-free, and good in bed.","Big Black Cock (used by couples seeking well-endowed black men).","Couples play sexually with others but only up to oral sex or touchingno full penetration with others.","Two couples having sex side-by-side but not touching each other."],"a":2,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What does 'full swap' mean?","o":["No means no  at any time, for any reason.","When one partner plays with someone theyre not attracted to so their partner can play with someone they want.","To keep the male/female ratio balanced for couples.","Couples have penetrative sex with other partners, separately or in the same room."],"a":3,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What is the universal swinger safe word/phrase most clubs recognize to instantly stop play?","o":["Red or Safe word (but 'Red' is the most common club-wide stop signal).","A single bisexual female who enjoys playing with couples.","Intense sex a couple has immediately after playing with others to reconnect.","To keep the male/female ratio balanced for couples."],"a":0,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What does 'DVP' stand for in swinger ads?","o":["Double Penetration (one vaginal, one anal).","Big Black Cock (used by couples seeking well-endowed black men).","Double Vaginal Penetration.","They only play with well-endowed black men."],"a":2,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What does 'DP' mean?","o":["A single bisexual female who enjoys playing with couples.","No means no  at any time, for any reason.","A 'bull' if desired, or more often just 'creepy single guy' if pushy.","Double Penetration (one vaginal, one anal)."],"a":3,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What is the 'pineapple' symbol in swinging?","o":["They smoke weed and are cool with others doing it.","It is a discreet signal used by some swingers to identify each other in vanilla settings.","Upside-down pineapples on cruise doors or lawn ornaments are a subtle swinger signal.","3555."],"a":2,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What is a 'hall pass' in lifestyle terms?","o":["Double Penetration (one vaginal, one anal).","No means no  at any time, for any reason.","When one partner plays with someone theyre not attracted to so their partner can play with someone they want.","Permission from a partner to have sex with someone else without them present."],"a":3,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What is the most common swinger rule about taking photos?","o":["Never take photos or videos of others without explicit permission.","Lifestyle (as in 'the swinger lifestyle').","They have vanilla jobs/friends/family and will never risk exposure.","Permission from a partner to have sex with someone else without them present."],"a":0,"p":100},{"c":"Hotel Takeover Parties","q":"What is a 'hotel takeover' in the swinger world?","o":["Naughty in Nawlins, Splash Takeovers (Atlanta/Mohegan), Lifestyle Takeover at Hedonism II (though resort).","Hundreds of half-naked swingers marching through the French Quarter flashing for beads.","'Eyes Wide Shut' masquerade parties with full anonymity masks.","An entire hotel is booked exclusively for lifestyle guests for a weekend of parties and play."],"a":3,"p":100},{"c":"Hotel Takeover Parties","q":"Name three of the biggest swinger hotel takeover events in the USA.","o":["A dedicated room with multiple sybian machines for women to ride in front of crowds.","Naughty in Nawlins, Splash Takeovers (Atlanta/Mohegan), Lifestyle Takeover at Hedonism II (though resort).","Large bowls of free condoms placed in every playroom and hallway.","Usually 10 or 11 PM and go until 46 AM."],"a":1,"p":100},{"c":"Hotel Takeover Parties","q":"At most hotel takeovers, what are the two main party nights called?","o":["A massive tent or ballroom sectioned with 50+ mattresses and sheer curtains.","A ballroom filled waist-high with soap foam where everyone ends up naked and slippery.","Anything from lingerie, fetish wear, body paint, or full costumevery little clothing is the norm.","Friday 'Meet & Greet' and Saturday 'Theme Night' or 'Main Event'."],"a":3,"p":100},{"c":"Hotel Takeover Parties","q":"What is the typical dress code for the Saturday night theme party at a takeover?","o":["A massive tent or ballroom sectioned with 50+ mattresses and sheer curtains.","An entire hotel is booked exclusively for lifestyle guests for a weekend of parties and play.","A dedicated room with multiple sybian machines for women to ride in front of crowds.","Anything from lingerie, fetish wear, body paint, or full costumevery little clothing is the norm."],"a":3,"p":100},{"c":"Hotel Takeover Parties","q":"What is a 'playroom' at a hotel takeover?","o":["A dedicated room with multiple sybian machines for women to ride in front of crowds.","A large suite or ballroom converted into a group sex area with mattresses, mood lighting, and no clothes allowed.","Anything from lingerie, fetish wear, body paint, or full costumevery little clothing is the norm.","Its an icebreaker where women model and everyone gets turned on early in the night."],"a":1,"p":100},{"c":"General Sex Trivia","q":"What is the average erect penis length according to the 2015 comprehensive BJU International study?","o":["The head of the penis.","Up to 8 inches per hour.","The cremaster muscle during prolonged arousal.","5.16 inches (13.12 cm)."],"a":3,"p":100},{"c":"General Sex Trivia","q":"What percentage of women can orgasm from penetration alone?","o":["Approximately 25-30%.","25 mL (about a teaspoon).","5.16 inches (13.12 cm).","16 (verified medical study)."],"a":0,"p":100},{"c":"General Sex Trivia","q":"What is the clitoris made of the same embryonic tissue as?","o":["13 inches (verified by medical imaging).","The head of the penis.","Oxytocin (the 'love/bonding' hormone).","Bonobos (and dolphins to a lesser extent)."],"a":1,"p":100},{"c":"General Sex Trivia","q":"How many nerve endings does the clitoris have?","o":["Over 8,000 (more than the head of the penis).","Around 19 (Kinsey) to 34 (Ohio State study).","Up to 8 inches per hour.","16 (verified medical study)."],"a":0,"p":100},{"c":"General Sex Trivia","q":"What is the only body part that exists solely for pleasure?","o":["Up to 8 inches per hour.","The cremaster muscle during prolonged arousal.","25 mL (about a teaspoon).","The clitoris."],"a":3,"p":100},{"c":"Sex Toys & Gear","q":"What was the first commercially successful modern vibrator called?","o":["A chastity device that prevents erection and orgasm.","The Hitachi Magic Wand (1968).","A fantasy dildo shaped like an octopus or alien tentacle.","A $2 million diamond-encrusted vibrator by LELO."],"a":1,"p":100},{"c":"Sex Toys & Gear","q":"What does 'squirting' dildo refer to?","o":["Over 300 thrusts per minute on high-end models.","A metal plug with a jeweled or rose-shaped flared base.","The Hitachi Magic Wand (1968).","A dildo with a reservoir and tube that can ejaculate fake cum."],"a":3,"p":100},{"c":"Sex Toys & Gear","q":"What is a 'Bad Dragon' toy famous for?","o":["A $2 million diamond-encrusted vibrator by LELO.","A metal plug with a jeweled or rose-shaped flared base.","Fantasy/animal-shaped dildos with extreme textures and cum-lube features.","A chastity device that prevents erection and orgasm."],"a":2,"p":100},{"c":"Sex Toys & Gear","q":"What is a 'Fucking Machine'?","o":["Dual-density silicone (firm core, soft outer layer).","A $2 million diamond-encrusted vibrator by LELO.","Over 300 thrusts per minute on high-end models.","A motorized device that thrusts a dildo at adjustable speeds and depths."],"a":3,"p":100},{"c":"Sex Toys & Gear","q":"What is the most popular material for realistic dildos?","o":["A fantasy dildo shaped like an octopus or alien tentacle.","The Hitachi Magic Wand (1968).","Dual-density silicone (firm core, soft outer layer).","Urethral insertion play for men."],"a":2,"p":100},{"c":"Masturbation","q":"What percentage of men admit to masturbating at least once a week?","o":["Over 90%.","The Handy.","When a man masturbates with such a tight grip that regular sex or oral feels less stimulating.","The STU (Stamina Training Unit)."],"a":0,"p":100},{"c":"Masturbation","q":"What is 'edging'?","o":["Masturbating for hours in a trance-like state, edging without cumming.","Over 50 hours (documented online challenge).","Bringing yourself to the brink of orgasm and stopping repeatedly to prolong pleasure.","Over 90%."],"a":2,"p":100},{"c":"Masturbation","q":"What is the 'death grip' syndrome?","o":["Massaging the prostate until fluid is released, sometimes without erection or orgasm.","The Autoblow or Fleshlight Launch with suction.","When a man masturbates with such a tight grip that regular sex or oral feels less stimulating.","The STU (Stamina Training Unit)."],"a":2,"p":100},{"c":"Masturbation","q":"What popular male toy replicates oral sex?","o":["Bringing yourself to the brink of orgasm and stopping repeatedly to prolong pleasure.","Over 90%.","The Autoblow or Fleshlight Launch with suction.","Masturbating for hours in a trance-like state, edging without cumming."],"a":2,"p":100},{"c":"Masturbation","q":"What is a 'rose toy'?","o":["The STU (Stamina Training Unit).","A clitoral suction vibrator shaped like a rose that went viral on TikTok.","The Autoblow or Fleshlight Launch with suction.","Over 50 hours (documented online challenge)."],"a":1,"p":100},{"c":"Lesbian Sex & Culture","q":"What is scissoring?","o":["A lesbian who has never had sex with a man.","Two women rubbing their vulvas together, usually in a crossed-leg position.","A woman who prefers to receive sexual pleasure but not give.","Another term for scissoring or any vulva-to-vulva grinding."],"a":1,"p":100},{"c":"Lesbian Sex & Culture","q":"What is a 'gold star lesbian'?","o":["A lesbian who has never had sex with a man.","Vaginal flatulence caused by air being pushed in and out.","A woman who prefers to receive sexual pleasure but not give.","Simultaneous penetration of both partners."],"a":0,"p":100},{"c":"Lesbian Sex & Culture","q":"What is tribbing?","o":["Another term for scissoring or any vulva-to-vulva grinding.","Simultaneous penetration of both partners.","Long-term lesbian couples supposedly having very little sex.","A masculine lesbian who prefers to give pleasure but not receive genital touch."],"a":0,"p":100},{"c":"Lesbian Sex & Culture","q":"What does 'pillow princess' mean in lesbian slang?","o":["A masculine lesbian who prefers to give pleasure but not receive genital touch.","A lesbian who has never had sex with a man.","A woman who prefers to receive sexual pleasure but not give.","The stereotype of intense emotional conflict in lesbian social circles."],"a":2,"p":100},{"c":"Lesbian Sex & Culture","q":"What is a 'stone butch'?","o":["Two women rubbing their vulvas together, usually in a crossed-leg position.","The stereotype of intense emotional conflict in lesbian social circles.","A lesbian who has never had sex with a man.","A masculine lesbian who prefers to give pleasure but not receive genital touch."],"a":3,"p":100},{"c":"Gay Sex & Culture","q":"What does 'top', 'bottom', and 'vers' mean?","o":["Top = prefers to penetrate; Bottom = prefers to be penetrated; Vers = versatile, does both.","Alkyl nitrites inhaled to relax the anal sphincter and intensify orgasm.","Inserting the entire hand (or more) into the anus.","A gay sex club with private rooms, saunas, and dark rooms for anonymous sex."],"a":0,"p":100},{"c":"Gay Sex & Culture","q":"What is 'sounding'?","o":["Inserting metal or silicone rods into the urethra for pleasure.","Using drugs (usually meth, GHB, or mephedrone) to enhance long gay sex parties.","A gay sex club with private rooms, saunas, and dark rooms for anonymous sex.","Anal sex without a condom."],"a":0,"p":100},{"c":"Gay Sex & Culture","q":"What is felching?","o":["A hole in a wall through which anonymous oral or anal sex occurs.","A gay sex club with private rooms, saunas, and dark rooms for anonymous sex.","Inserting metal or silicone rods into the urethra for pleasure.","Sucking semen out of someones anus after ejaculation."],"a":3,"p":100},{"c":"Gay Sex & Culture","q":"What is a 'glory hole'?","o":["Top = prefers to penetrate; Bottom = prefers to be penetrated; Vers = versatile, does both.","A hole in a wall through which anonymous oral or anal sex occurs.","Inserting metal or silicone rods into the urethra for pleasure.","Extreme raunchy sex involving piss, spit, fisting, and no limits."],"a":1,"p":100},{"c":"Gay Sex & Culture","q":"What does 'bareback' mean?","o":["Anal sex without a condom.","Inserting the entire hand (or more) into the anus.","Rare fetish where HIV-negative men actively seek to become infected.","Using drugs (usually meth, GHB, or mephedrone) to enhance long gay sex parties."],"a":0,"p":100},{"c":"STIs & Sexual Health","q":"Which STI is incurable but manageable with daily medication?","o":["1090 days (average 21 days).","Years, potentially causing infertility if untreated.","Herpes (HSV-1 and HSV-2) and HIV.","Yes, and it can cause throat cancer."],"a":2,"p":100},{"c":"STIs & Sexual Health","q":"What is the only 100% effective way to prevent STI transmission?","o":["Years, potentially causing infertility if untreated.","Abstinence (or mutual monogamy with tested partners).","Yes, and it can cause throat cancer.","Nearly 100% against the strains it covers."],"a":1,"p":100},{"c":"STIs & Sexual Health","q":"Can you get HPV from oral sex?","o":["1090 days (average 21 days).","Herpes (HSV-1 and HSV-2) and HIV.","Years, potentially causing infertility if untreated.","Yes, and it can cause throat cancer."],"a":3,"p":100},{"c":"STIs & Sexual Health","q":"What is the most common STI in the United States?","o":["Nearly 100% against the strains it covers.","As early as 1014 days with nucleic acid tests.","Years, potentially causing infertility if untreated.","HPV (human papillomavirus)."],"a":3,"p":100},{"c":"STIs & Sexual Health","q":"How long can chlamydia stay asymptomatic in women?","o":["1090 days (average 21 days).","HIV-positive people with undetectable viral load cannot transmit HIV sexually.","Years, potentially causing infertility if untreated.","Nearly 100% against the strains it covers."],"a":2,"p":100},{"c":"Cheating & Non-Monogamy Drama","q":"What is a 'hotwife'?","o":["Swinging is recreational sex; polyamory involves emotional relationships with multiple people.","A woman who enjoys watching her man with other women.","A married woman who has sex with other men with her husbands encouragement.","Partners agree to play separately and never discuss details."],"a":2,"p":100},{"c":"Cheating & Non-Monogamy Drama","q":"What is 'cuckolding'?","o":["A woman who enjoys watching her man with other women.","Having a primary partner and secondary relationships with rules.","A married woman who has sex with other men with her husbands encouragement.","A man who enjoys watching his partner have sex with other men, often with humiliation."],"a":3,"p":100},{"c":"Cheating & Non-Monogamy Drama","q":"What is the difference between swinging and polyamory?","o":["Having a primary partner and secondary relationships with rules.","Similar to hotwife but without humiliationthe husband proudly watches.","A married woman who has sex with other men with her husbands encouragement.","Swinging is recreational sex; polyamory involves emotional relationships with multiple people."],"a":3,"p":100},{"c":"Fluid Swapping & Extreme Play","q":"What is 'bukkake'?","o":["Multiple men ejaculating on one persons face/body.","When the rectal mucosa prolapses and 'blooms' out like a rose during extreme anal play.","Fantasizing or role-playing impregnation, often with bareback creampies.","Two penises in the same anus at the same time."],"a":0,"p":100},{"c":"Fluid Swapping & Extreme Play","q":"What is 'snowballing'?","o":["Ejaculating inside a vagina or anus (often followed by eating it).","Sucking cum out of an ass using a straw (extreme version).","When the rectal mucosa prolapses and 'blooms' out like a rose during extreme anal play.","Passing semen mouth-to-mouth after oral sex."],"a":3,"p":100},{"c":"Fluid Swapping & Extreme Play","q":"What is a 'cream pie'?","o":["Two penises in the same anus at the same time.","When the rectal mucosa prolapses and 'blooms' out like a rose during extreme anal play.","Gangbang = multiple men taking turns penetrating; bukkake gangbang = all finish on face/body.","Ejaculating inside a vagina or anus (often followed by eating it)."],"a":3,"p":100},{"c":"Extreme & Edge Play","q":"What is 'figging'?","o":["Inserting a peeled ginger root into the anus or vagina for burning sensation play.","Inserting sterile hypodermic needles under the skin in patterns.","Wrapping someone completely in plastic wrap or pallet wrap for sensory deprivation.","Consensual fantasy involving being 'eaten' (usually with knives and blood)."],"a":0,"p":100},{"c":"Extreme & Edge Play","q":"What is 'knife play'?","o":["Using flash cotton or alcohol flames briefly on the skin.","Consensual fantasy involving being 'eaten' (usually with knives and blood).","Inserting a peeled ginger root into the anus or vagina for burning sensation play.","Using knives or blades on the skin for psychological or light cutting play (with strict safety)."],"a":3,"p":100},{"c":"Extreme & Edge Play","q":"What is 'breath play'?","o":["Restricting oxygen (choking, bagging) for heightened orgasmconsidered high-risk.","Using TENS units or violet wands to send electric currents through the body.","Consensual fantasy involving being 'eaten' (usually with knives and blood).","Inserting a peeled ginger root into the anus or vagina for burning sensation play."],"a":0,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What does 'LS' stand for on swinger profiles?","o":["Established couples introducing and vouching for new couples to get them into exclusive private parties.","Height-Weight Proportional.","A 'vanilla with potential' or simply 'LS-friendly'.","Lifestyle (as in 'the swinger lifestyle')."],"a":3,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What is a 'lifestyle-friendly' vanilla friend called?","o":["They only play with well-endowed black men.","When one partner plays with someone theyre not attracted to so their partner can play with someone they want.","A 'vanilla with potential' or simply 'LS-friendly'.","You must stay at least four feet away from playing couples unless invited."],"a":2,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What does 'HWP' mean in swinger ads?","o":["Hes offering money or gifts to play (usually frowned upon).","Double Penetration (one vaginal, one anal).","A clear sign the occupants are swingers looking to play.","Height-Weight Proportional."],"a":3,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What is the most common reason couples quit swinging?","o":["When one partner plays with someone theyre not attracted to so their partner can play with someone they want.","A single bisexual female who enjoys playing with couples.","A chartered cruise ship turned into a giant floating swinger party (Bliss, Desire, Temptation).","Jealousy or unequal desire levels between partners."],"a":3,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What does 'same room only' mean?","o":["No playing with the same couple more than once every 90 days to prevent feelings.","Privacy and discretionreal names are shared only after trust.","Bi-curious = willing to kiss or touch women for fun; bi-sexual = actively wants to go down on women.","Couples only play if they can see each otherno separate rooms."],"a":3,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What is 'reclamation sex'?","o":["Intense sex a couple has immediately after playing with others to reconnect.","They smoke weed and are cool with others doing it.","Male-Female-Male (two men, one woman) and Female-Male-Female (two women, one man).","Closed-door wants privacy during full swap; open-door likes being watched."],"a":0,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What does 'BBC' stand for in swinger ads?","o":["They have vanilla jobs/friends/family and will never risk exposure.","Big Black Cock (used by couples seeking well-endowed black men).","Play with a couple once and never again to avoid emotional attachment.","The female half is bisexual but the couple only wants soft-swap or girl-girl play."],"a":1,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What is a 'single male' derogatorily called in the lifestyle?","o":["Bi-curious = willing to kiss or touch women for fun; bi-sexual = actively wants to go down on women.","When one partner plays with someone theyre not attracted to so their partner can play with someone they want.","A 'bull' if desired, or more often just 'creepy single guy' if pushy.","Established couples introducing and vouching for new couples to get them into exclusive private parties."],"a":2,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What is the 'one-and-done' rule many couples follow?","o":["To keep the male/female ratio balanced for couples.","A clear sign the occupants are swingers looking to play.","A 'bull' if desired, or more often just 'creepy single guy' if pushy.","Play with a couple once and never again to avoid emotional attachment."],"a":3,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What does '420 friendly' mean on swinger sites?","o":["A subtle pinky-ring touch or wrist squeeze used to identify each other discreetly.","They smoke weed and are cool with others doing it.","Permission from a partner to have sex with someone else without them present.","Upside-down pineapples on cruise doors or lawn ornaments are a subtle swinger signal."],"a":1,"p":100},{"c":"Hotel Takeover Parties","q":"What time do most hotel takeover playrooms officially open?","o":["A large suite or ballroom converted into a group sex area with mattresses, mood lighting, and no clothes allowed.","Staff or volunteers hand out fresh towels and collect used ones constantly.","Anything from lingerie, fetish wear, body paint, or full costumevery little clothing is the norm.","Usually 10 or 11 PM and go until 46 AM."],"a":3,"p":100},{"c":"Hotel Takeover Parties","q":"What is a 'condom bowl' at takeovers?","o":["Hundreds of half-naked swingers marching through the French Quarter flashing for beads.","A dedicated room with multiple sybian machines for women to ride in front of crowds.","A massive tent or ballroom sectioned with 50+ mattresses and sheer curtains.","Large bowls of free condoms placed in every playroom and hallway."],"a":3,"p":100},{"c":"Hotel Takeover Parties","q":"Why do many takeovers have 'towel service' in playrooms?","o":["Staff or volunteers hand out fresh towels and collect used ones constantly.","Usually 10 or 11 PM and go until 46 AM.","Clothing-optional pool turns into a giant wet orgy with DJ and glow sticks.","Only certain floors are booked by swingers so they can walk naked without getting arrested."],"a":0,"p":100},{"c":"Hotel Takeover Parties","q":"What is the 'after-party suite'?","o":["Only certain floors are booked by swingers so they can walk naked without getting arrested.","A private suite that stays open for orgies after the official playrooms close.","Clothing-optional pool turns into a giant wet orgy with DJ and glow sticks.","Naughty in Nawlins, Splash Takeovers (Atlanta/Mohegan), Lifestyle Takeover at Hedonism II (though resort)."],"a":1,"p":100},{"c":"Hotel Takeover Parties","q":"What happens if hotel security catches non-lifestyle guests sneaking in?","o":["Friday 'Meet & Greet' and Saturday 'Theme Night' or 'Main Event'.","Naughty in Nawlins, Splash Takeovers (Atlanta/Mohegan), Lifestyle Takeover at Hedonism II (though resort).","A dedicated room with multiple sybian machines for women to ride in front of crowds.","They are immediately escorted out and the entire event can be shut down."],"a":3,"p":100},{"c":"Hotel Takeover Parties","q":"What is the most infamous hotel takeover theme night?","o":["Clothing-optional pool turns into a giant wet orgy with DJ and glow sticks.","Hundreds of half-naked swingers marching through the French Quarter flashing for beads.","Its an icebreaker where women model and everyone gets turned on early in the night.","'Eyes Wide Shut' masquerade parties with full anonymity masks."],"a":3,"p":100},{"c":"Hotel Takeover Parties","q":"Why do takeovers book entire floors or wings?","o":["Usually 10 or 11 PM and go until 46 AM.","So people can walk naked in hallways and have sex in open doorways safely.","Only certain floors are booked by swingers so they can walk naked without getting arrested.","'Eyes Wide Shut' masquerade parties with full anonymity masks."],"a":1,"p":100},{"c":"Hotel Takeover Parties","q":"What is a 'sybian room' at some takeovers?","o":["A dedicated room with multiple sybian machines for women to ride in front of crowds.","Clothing-optional pool turns into a giant wet orgy with DJ and glow sticks.","Couples decorate their hotel doors with flirty signs, LED lights, or leave them open as an invitation.","A massive tent or ballroom sectioned with 50+ mattresses and sheer curtains."],"a":0,"p":100},{"c":"General Sex Trivia","q":"How much can the vagina expand during arousal?","o":["Over 50% in most Western countries.","16 (verified medical study).","Up to 8 inches per hour.","Up to 200% in length and width."],"a":3,"p":100},{"c":"General Sex Trivia","q":"What is the average number of times a man thinks about sex per day according to popular studies?","o":["13 inches (verified by medical imaging).","Around 19 (Kinsey) to 34 (Ohio State study).","About 1922 minutes worldwide.","Over 8,000 (more than the head of the penis)."],"a":1,"p":100},{"c":"General Sex Trivia","q":"What percentage of women fake orgasms at least sometimes?","o":["134 (with toys and multiple partners).","5080% depending on the study.","About 100150 calories.","Over 50% in most Western countries."],"a":1,"p":100},{"c":"General Sex Trivia","q":"How long does the average sex session last (foreplay + intercourse)?","o":["About 1922 minutes worldwide.","Bonobos (and dolphins to a lesser extent).","The clitoris.","5.16 inches (13.12 cm)."],"a":0,"p":100},{"c":"General Sex Trivia","q":"What is the refractory period?","o":["5.16 inches (13.12 cm).","The recovery time after orgasm when a man cannot get another erection.","16 (verified medical study).","Over 8,000 (more than the head of the penis)."],"a":1,"p":100},{"c":"General Sex Trivia","q":"What is the G-spot scientifically called?","o":["16 (verified medical study).","The Grfenberg spot, part of the clitoral network on the anterior vaginal wall.","The cremaster muscle during prolonged arousal.","The head of the penis."],"a":1,"p":100},{"c":"General Sex Trivia","q":"What chemical is released in massive amounts during orgasm?","o":["Around 19 (Kinsey) to 34 (Ohio State study).","16 (verified medical study).","Bonobos (and dolphins to a lesser extent).","Oxytocin (the 'love/bonding' hormone)."],"a":3,"p":100},{"c":"General Sex Trivia","q":"What is the only mammal that has sex for pleasure besides humans?","o":["Bonobos (and dolphins to a lesser extent).","The cremaster muscle during prolonged arousal.","25 mL (about a teaspoon).","13 inches (verified by medical imaging)."],"a":0,"p":100},{"c":"Sex Toys & Gear","q":"What is a 'rosebud' butt plug?","o":["Over 300 thrusts per minute on high-end models.","The Hitachi Magic Wand (1968).","Being the best stainless-steel G-spot/P-spot toy on the planet.","A metal plug with a jeweled or rose-shaped flared base."],"a":3,"p":100},{"c":"Sex Toys & Gear","q":"What does a 'cock cage' do?","o":["Over 300 thrusts per minute on high-end models.","A chastity device that prevents erection and orgasm.","Being the best stainless-steel G-spot/P-spot toy on the planet.","Fantasy/animal-shaped dildos with extreme textures and cum-lube features."],"a":1,"p":100},{"c":"Sex Toys & Gear","q":"What is a 'Njoy Pure Wand' famous for?","o":["A $2 million diamond-encrusted vibrator by LELO.","Over 300 thrusts per minute on high-end models.","Being the best stainless-steel G-spot/P-spot toy on the planet.","Pleasure Air / suction toys that stimulate the clitoris without direct contact."],"a":2,"p":100},{"c":"Sex Toys & Gear","q":"What is a 'tentacle dildo'?","o":["A dildo with a reservoir and tube that can ejaculate fake cum.","A fantasy dildo shaped like an octopus or alien tentacle.","Over 300 thrusts per minute on high-end models.","Dual-density silicone (firm core, soft outer layer)."],"a":1,"p":100},{"c":"Sex Toys & Gear","q":"What toy is known as the 'womanizer' technology?","o":["Dual-density silicone (firm core, soft outer layer).","Pleasure Air / suction toys that stimulate the clitoris without direct contact.","A $2 million diamond-encrusted vibrator by LELO.","A motorized device that thrusts a dildo at adjustable speeds and depths."],"a":1,"p":100},{"c":"Masturbation","q":"What is 'gooning'?","o":["Masturbating for hours in a trance-like state, edging without cumming.","Massaging the prostate until fluid is released, sometimes without erection or orgasm.","The Autoblow or Fleshlight Launch with suction.","A high-end male milking machine that sucks like a mouth."],"a":0,"p":100},{"c":"Masturbation","q":"What male sex toy uses peristaltic pumping instead of vibration?","o":["Over 50 hours (documented online challenge).","Massaging the prostate until fluid is released, sometimes without erection or orgasm.","Bringing yourself to the brink of orgasm and stopping repeatedly to prolong pleasure.","The Handy."],"a":3,"p":100},{"c":"Masturbation","q":"What is the most popular Fleshlight texture of all time?","o":["Massaging the prostate until fluid is released, sometimes without erection or orgasm.","The STU (Stamina Training Unit).","Rubbing penises together without penetration.","Masturbating for hours in a trance-like state, edging without cumming."],"a":1,"p":100},{"c":"Masturbation","q":"What is 'prostate milking'?","o":["The STU (Stamina Training Unit).","Massaging the prostate until fluid is released, sometimes without erection or orgasm.","A clitoral suction vibrator shaped like a rose that went viral on TikTok.","Bringing yourself to the brink of orgasm and stopping repeatedly to prolong pleasure."],"a":1,"p":100},{"c":"Lesbian Sex & Culture","q":"What is 'fingering with nails' etiquette in lesbian sex?","o":["A lesbian who moves in with her partner after the second date.","Short, filed nails or wear gloveslong nails can cause microtears.","Another term for scissoring or any vulva-to-vulva grinding.","Vaginal flatulence caused by air being pushed in and out."],"a":1,"p":100},{"c":"Lesbian Sex & Culture","q":"What is a 'strapless strap-on'?","o":["A double-ended dildo where one end goes inside the wearer (like the FeelDoe).","Vaginal flatulence caused by air being pushed in and out.","Another term for scissoring or any vulva-to-vulva grinding.","A lesbian who moves in with her partner after the second date."],"a":0,"p":100},{"c":"Lesbian Sex & Culture","q":"What does 'U-Haul lesbian' mean?","o":["A double-ended dildo where one end goes inside the wearer (like the FeelDoe).","A lesbian who moves in with her partner after the second date.","Long-term lesbian couples supposedly having very little sex.","The stereotype of intense emotional conflict in lesbian social circles."],"a":1,"p":100},{"c":"Lesbian Sex & Culture","q":"What is 'dyke drama'?","o":["A lesbian who has never had sex with a man.","A lesbian who moves in with her partner after the second date.","Simultaneous penetration of both partners.","The stereotype of intense emotional conflict in lesbian social circles."],"a":3,"p":100},{"c":"Gay Sex & Culture","q":"What is 'poppers'?","o":["A gay sex club with private rooms, saunas, and dark rooms for anonymous sex.","Alkyl nitrites inhaled to relax the anal sphincter and intensify orgasm.","Anal sex without a condom.","Using drugs (usually meth, GHB, or mephedrone) to enhance long gay sex parties."],"a":1,"p":100},{"c":"Gay Sex & Culture","q":"What is 'fisting'?","o":["Inserting metal or silicone rods into the urethra for pleasure.","Alkyl nitrites inhaled to relax the anal sphincter and intensify orgasm.","Inserting the entire hand (or more) into the anus.","A hole in a wall through which anonymous oral or anal sex occurs."],"a":2,"p":100},{"c":"Gay Sex & Culture","q":"What is a 'bathhouse'?","o":["Alkyl nitrites inhaled to relax the anal sphincter and intensify orgasm.","A gay sex club with private rooms, saunas, and dark rooms for anonymous sex.","Anal sex without a condom.","Rare fetish where HIV-negative men actively seek to become infected."],"a":1,"p":100},{"c":"Gay Sex & Culture","q":"What does 'PrEP' stand for?","o":["Inserting metal or silicone rods into the urethra for pleasure.","A hole in a wall through which anonymous oral or anal sex occurs.","Rare fetish where HIV-negative men actively seek to become infected.","Pre-Exposure Prophylaxisa daily pill that prevents HIV."],"a":3,"p":100},{"c":"STIs & Sexual Health","q":"How soon after exposure can HIV be detected with modern tests?","o":["As early as 1014 days with nucleic acid tests.","HIV-positive people with undetectable viral load cannot transmit HIV sexually.","1090 days (average 21 days).","Taking doxycycline within 72 hours after sex to prevent bacterial STIs."],"a":0,"p":100},{"c":"STIs & Sexual Health","q":"What is 'doxycycline post-exposure prophylaxis' (doxy-PEP)?","o":["1090 days (average 21 days).","As early as 1014 days with nucleic acid tests.","Taking doxycycline within 72 hours after sex to prevent bacterial STIs.","Herpes (HSV-1 and HSV-2) and HIV."],"a":2,"p":100},{"c":"STIs & Sexual Health","q":"Can you get gonorrhea in the throat?","o":["As early as 1014 days with nucleic acid tests.","HIV-positive people with undetectable viral load cannot transmit HIV sexually.","Yespharyngeal gonorrhea from oral sex.","Nearly 100% against the strains it covers."],"a":2,"p":100},{"c":"Cheating & Non-Monogamy Drama","q":"What is 'stag/vixen' dynamic?","o":["A married woman who has sex with other men with her husbands encouragement.","Similar to hotwife but without humiliationthe husband proudly watches.","Swinging is recreational sex; polyamory involves emotional relationships with multiple people.","Having a primary partner and secondary relationships with rules."],"a":1,"p":100},{"c":"Cheating & Non-Monogamy Drama","q":"What is 'dont ask, dont tell' (DADT) in non-monogamy?","o":["Partners agree to play separately and never discuss details.","Having a primary partner and secondary relationships with rules.","Swinging is recreational sex; polyamory involves emotional relationships with multiple people.","A woman who enjoys watching her man with other women."],"a":0,"p":100},{"c":"Fluid Swapping & Extreme Play","q":"What is 'breeding' in kink terms?","o":["Sucking cum out of an ass using a straw (extreme version).","Two penises in the same anus at the same time.","Ejaculating inside a vagina or anus (often followed by eating it).","Fantasizing or role-playing impregnation, often with bareback creampies."],"a":3,"p":100},{"c":"Fluid Swapping & Extreme Play","q":"What is 'felching with a straw'?","o":["Two penises in the same anus at the same time.","Ejaculating inside a vagina or anus (often followed by eating it).","Urinating on or in a partner.","Sucking cum out of an ass using a straw (extreme version)."],"a":3,"p":100},{"c":"Fluid Swapping & Extreme Play","q":"What is a 'gangbang' vs a 'bukkake gangbang'?","o":["Gangbang = multiple men taking turns penetrating; bukkake gangbang = all finish on face/body.","Multiple men ejaculating on one persons face/body.","Fantasizing or role-playing impregnation, often with bareback creampies.","Ejaculating inside a vagina or anus (often followed by eating it)."],"a":0,"p":100},{"c":"Extreme & Edge Play","q":"What is 'needle play'?","o":["Wrapping someone completely in plastic wrap or pallet wrap for sensory deprivation.","Inserting a peeled ginger root into the anus or vagina for burning sensation play.","Using knives or blades on the skin for psychological or light cutting play (with strict safety).","Inserting sterile hypodermic needles under the skin in patterns."],"a":3,"p":100},{"c":"Extreme & Edge Play","q":"What is 'electroplay'?","o":["Using TENS units or violet wands to send electric currents through the body.","Using flash cotton or alcohol flames briefly on the skin.","Consensual fantasy involving being 'eaten' (usually with knives and blood).","Using knives or blades on the skin for psychological or light cutting play (with strict safety)."],"a":0,"p":100},{"c":"Extreme & Edge Play","q":"What is 'mummification'?","o":["Using TENS units or violet wands to send electric currents through the body.","Wrapping someone completely in plastic wrap or pallet wrap for sensory deprivation.","Inserting sterile hypodermic needles under the skin in patterns.","Consensual fantasy involving being 'eaten' (usually with knives and blood)."],"a":1,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What does 'certified' mean on swinger sites like SDC or Kasidie?","o":["You must stay at least four feet away from playing couples unless invited.","No means no  at any time, for any reason.","Closed-door wants privacy during full swap; open-door likes being watched.","Another couple has met and verified that the profile is real and attractive."],"a":3,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"Why do many swingers use fake first names?","o":["It is a discreet signal used by some swingers to identify each other in vanilla settings.","They only play with well-endowed black men.","To keep the male/female ratio balanced for couples.","Privacy and discretionreal names are shared only after trust."],"a":3,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What is a 'take one for the team' situation?","o":["A 'vanilla with potential' or simply 'LS-friendly'.","When one partner plays with someone theyre not attracted to so their partner can play with someone they want.","Play with a couple once and never again to avoid emotional attachment.","They have vanilla jobs/friends/family and will never risk exposure."],"a":1,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What is the 'four-foot rule' at some swinger clubs?","o":["They have vanilla jobs/friends/family and will never risk exposure.","Double Vaginal Penetration.","You must stay at least four feet away from playing couples unless invited.","Double Penetration (one vaginal, one anal)."],"a":2,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What does 'MFM' and 'FMF' mean?","o":["Male-Female-Male (two men, one woman) and Female-Male-Female (two women, one man).","Another couple has met and verified that the profile is real and attractive.","No means no  at any time, for any reason.","A single bisexual female who enjoys playing with couples."],"a":0,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What is 'parallel play'?","o":["Two couples having sex side-by-side but not touching each other.","Drug and Disease Free.","Height-Weight Proportional.","A couple thats actually attractive, drama-free, and good in bed."],"a":0,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What is the most common age range for active swingers?","o":["Couples play sexually with others but only up to oral sex or touchingno full penetration with others.","3555.","Lifestyle (as in 'the swinger lifestyle').","Big Black Cock (used by couples seeking well-endowed black men)."],"a":1,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What does 'BBC only' mean on a couples profile?","o":["A 'bull' if desired, or more often just 'creepy single guy' if pushy.","Red or Safe word (but 'Red' is the most common club-wide stop signal).","They only play with well-endowed black men.","Height-Weight Proportional."],"a":2,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What is 'girl-girl only' comfort level?","o":["The female half is bisexual but the couple only wants soft-swap or girl-girl play.","Height-Weight Proportional.","Double Vaginal Penetration.","A chartered cruise ship turned into a giant floating swinger party (Bliss, Desire, Temptation)."],"a":0,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"Why do many swinger clubs ban single men on Saturday nights?","o":["Couples have penetrative sex with other partners, separately or in the same room.","To keep the male/female ratio balanced for couples.","Hes offering money or gifts to play (usually frowned upon).","Jealousy or unequal desire levels between partners."],"a":1,"p":100},{"c":"Swinger Lifestyle & Etiette","q":"What does 'no single males' really mean on a couples profile?","o":["Nearly 100% against the strains it covers.","They are tired of creepy messages and only accept single men recommended by other couples.","The head of the penis.","Height-Weight Proportional."],"a":1,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What is a 'lifestyle cruise'?","o":["A chartered cruise ship turned into a giant floating swinger party (Bliss, Desire, Temptation).","Privacy and discretionreal names are shared only after trust.","A single bisexual female who enjoys playing with couples.","A clear sign the occupants are swingers looking to play."],"a":0,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What is the #1 rule posted at every swinger club entrance?","o":["A single bisexual female who enjoys playing with couples.","A 'vanilla with potential' or simply 'LS-friendly'.","No means no  at any time, for any reason.","They have vanilla jobs/friends/family and will never risk exposure."],"a":2,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What does 'fun couple' mean in swinger speak?","o":["A couple thats actually attractive, drama-free, and good in bed.","They only play with well-endowed black men.","Bi-curious = willing to kiss or touch women for fun; bi-sexual = actively wants to go down on women.","Never take photos or videos of others without explicit permission."],"a":0,"p":100},{"c":"Swinger Lifestyle & Etiette","q":"What is 'the lifestyle nod'?","o":["The clitoris.","Yes, and it can cause throat cancer.","Using knives or blades on the skin for psychological or light cutting play (with strict safety).","That subtle head nod or smile two swingers give each other in a vanilla setting when they recognize the signals."],"a":3,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"Why do many couples use the hot tub as the first play area?","o":["A 'vanilla with potential' or simply 'LS-friendly'.","Couples play sexually with others but only up to oral sex or touchingno full penetration with others.","Established couples introducing and vouching for new couples to get them into exclusive private parties.","Nudity feels natural, touching starts innocently, and its easy to gauge chemistry."],"a":3,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What is 'vouch culture'?","o":["3555.","Established couples introducing and vouching for new couples to get them into exclusive private parties.","Red or Safe word (but 'Red' is the most common club-wide stop signal).","Jealousy or unequal desire levels between partners."],"a":1,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What does 'discreet' really mean on a profile?","o":["Lifestyle (as in 'the swinger lifestyle').","They have vanilla jobs/friends/family and will never risk exposure.","It is a discreet signal used by some swingers to identify each other in vanilla settings.","Play with a couple once and never again to avoid emotional attachment."],"a":1,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What is the difference between 'bi-curious' and 'bi-sexual' on a womans profile?","o":["It is a discreet signal used by some swingers to identify each other in vanilla settings.","Red or Safe word (but 'Red' is the most common club-wide stop signal).","Bi-curious = willing to kiss or touch women for fun; bi-sexual = actively wants to go down on women.","When one partner plays with someone theyre not attracted to so their partner can play with someone they want."],"a":2,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What is a 'closed-door couple' vs 'open-door couple'?","o":["When one partner plays with someone theyre not attracted to so their partner can play with someone they want.","Couples have penetrative sex with other partners, separately or in the same room.","Closed-door wants privacy during full swap; open-door likes being watched.","Established couples introducing and vouching for new couples to get them into exclusive private parties."],"a":2,"p":100},{"c":"Hotel Takeover Parties","q":"What is the 'Naughty Mardi Gras' parade at Naughty in Nawlins?","o":["Usually 10 or 11 PM and go until 46 AM.","Friday 'Meet & Greet' and Saturday 'Theme Night' or 'Main Event'.","A private suite that stays open for orgies after the official playrooms close.","Hundreds of half-naked swingers marching through the French Quarter flashing for beads."],"a":3,"p":100},{"c":"Hotel Takeover Parties","q":"What is a 'lifestyle floor' at a partial takeover?","o":["'Eyes Wide Shut' masquerade parties with full anonymity masks.","Its an icebreaker where women model and everyone gets turned on early in the night.","An entire hotel is booked exclusively for lifestyle guests for a weekend of parties and play.","Only certain floors are booked by swingers so they can walk naked without getting arrested."],"a":3,"p":100},{"c":"Hotel Takeover Parties","q":"What are 'door decorations' at takeovers?","o":["They are immediately escorted out and the entire event can be shut down.","Couples decorate their hotel doors with flirty signs, LED lights, or leave them open as an invitation.","Clothing-optional pool turns into a giant wet orgy with DJ and glow sticks.","A dedicated room with multiple sybian machines for women to ride in front of crowds."],"a":1,"p":100},{"c":"Hotel Takeover Parties","q":"What is the 'orgy dome' at some takeovers?","o":["'Eyes Wide Shut' masquerade parties with full anonymity masks.","A massive tent or ballroom sectioned with 50+ mattresses and sheer curtains.","Only certain floors are booked by swingers so they can walk naked without getting arrested.","Large bowls of free condoms placed in every playroom and hallway."],"a":1,"p":100},{"c":"Hotel Takeover Parties","q":"Why do takeovers always have a 'lingerie fashion show'?","o":["Its an icebreaker where women model and everyone gets turned on early in the night.","A large suite or ballroom converted into a group sex area with mattresses, mood lighting, and no clothes allowed.","Couples decorate their hotel doors with flirty signs, LED lights, or leave them open as an invitation.","Red room = couples and women only; black room = single men allowed."],"a":0,"p":100},{"c":"Hotel Takeover Parties","q":"What happens at 2 AM pool parties at Splash Takeovers?","o":["Only certain floors are booked by swingers so they can walk naked without getting arrested.","Clothing-optional pool turns into a giant wet orgy with DJ and glow sticks.","Friday 'Meet & Greet' and Saturday 'Theme Night' or 'Main Event'.","Couples decorate their hotel doors with flirty signs, LED lights, or leave them open as an invitation."],"a":1,"p":100},{"c":"Hotel Takeover Parties","q":"What is the 'red room' vs 'black room' at some takeovers?","o":["Anything from lingerie, fetish wear, body paint, or full costumevery little clothing is the norm.","So people can walk naked in hallways and have sex in open doorways safely.","Friday 'Meet & Greet' and Saturday 'Theme Night' or 'Main Event'.","Red room = couples and women only; black room = single men allowed."],"a":3,"p":100},{"c":"Hotel Takeover Parties","q":"What is a 'foam party' at a takeover?","o":["They are immediately escorted out and the entire event can be shut down.","Only certain floors are booked by swingers so they can walk naked without getting arrested.","An entire hotel is booked exclusively for lifestyle guests for a weekend of parties and play.","A ballroom filled waist-high with soap foam where everyone ends up naked and slippery."],"a":3,"p":100},{"c":"General Sex Trivia","q":"How many calories does the average man burn during 20 minutes of vigorous sex?","o":["Oxytocin (the 'love/bonding' hormone).","About 100150 calories.","Up to 200% in length and width.","13 inches (verified by medical imaging)."],"a":1,"p":100},{"c":"General Sex Trivia","q":"What percentage of women own at least one vibrator?","o":["Up to 200% in length and width.","Over 50% in most Western countries.","13 inches (verified by medical imaging).","Over 8,000 (more than the head of the penis)."],"a":1,"p":100},{"c":"General Sex Trivia","q":"What is the world record for most male orgasms in one hour?","o":["Oxytocin (the 'love/bonding' hormone).","The cremaster muscle during prolonged arousal.","16 (verified medical study).","5080% depending on the study."],"a":2,"p":100},{"c":"General Sex Trivia","q":"What is the world record for female orgasms in one hour?","o":["134 (with toys and multiple partners).","The cremaster muscle during prolonged arousal.","Oxytocin (the 'love/bonding' hormone).","About 1922 minutes worldwide."],"a":0,"p":100},{"c":"General Sex Trivia","q":"What is the average volume of semen per ejaculation?","o":["About 1922 minutes worldwide.","25 mL (about a teaspoon).","About 100150 calories.","Up to 200% in length and width."],"a":1,"p":100},{"c":"General Sex Trivia","q":"What is the deepest recorded vaginal intercourse?","o":["25 mL (about a teaspoon).","Up to 8 inches per hour.","13 inches (verified by medical imaging).","Bonobos (and dolphins to a lesser extent)."],"a":2,"p":100},{"c":"General Sex Trivia","q":"How fast does sperm swim?","o":["The head of the penis.","13 inches (verified by medical imaging).","Up to 8 inches per hour.","Bonobos (and dolphins to a lesser extent)."],"a":2,"p":100},{"c":"General Sex Trivia","q":"What is the only muscle in the body that can contract for hours?","o":["About 1922 minutes worldwide.","About 100150 calories.","The cremaster muscle during prolonged arousal.","16 (verified medical study)."],"a":2,"p":100},{"c":"Sex Toys & Gear","q":"What is a 'Lovense Lush'?","o":["Urethral insertion play for men.","A dildo with a reservoir and tube that can ejaculate fake cum.","A wearable egg vibrator controlled by smartphone from anywhere in the world.","Dual-density silicone (firm core, soft outer layer)."],"a":2,"p":100},{"c":"Sex Toys & Gear","q":"What is a 'clone-a-willy' kit?","o":["Urethral insertion play for men.","A wearable egg vibrator controlled by smartphone from anywhere in the world.","Over 300 thrusts per minute on high-end models.","A DIY kit to make an exact vibrating replica of your partners penis."],"a":3,"p":100},{"c":"Sex Toys & Gear","q":"What is the most expensive sex toy ever sold?","o":["A $2 million diamond-encrusted vibrator by LELO.","A motorized device that thrusts a dildo at adjustable speeds and depths.","A fantasy dildo shaped like an octopus or alien tentacle.","A dildo with a reservoir and tube that can ejaculate fake cum."],"a":0,"p":100},{"c":"Sex Toys & Gear","q":"What is a 'fucking machine' speed record?","o":["The Hitachi Magic Wand (1968).","Urethral insertion play for men.","Over 300 thrusts per minute on high-end models.","Fantasy/animal-shaped dildos with extreme textures and cum-lube features."],"a":2,"p":100},{"c":"Sex Toys & Gear","q":"What is a 'sounding rod set' used for?","o":["Urethral insertion play for men.","The Hitachi Magic Wand (1968).","A fantasy dildo shaped like an octopus or alien tentacle.","A motorized device that thrusts a dildo at adjustable speeds and depths."],"a":0,"p":100},{"c":"Masturbation","q":"What is the longest recorded male edging session?","o":["The Autoblow or Fleshlight Launch with suction.","Over 50 hours (documented online challenge).","Massaging the prostate until fluid is released, sometimes without erection or orgasm.","A clitoral suction vibrator shaped like a rose that went viral on TikTok."],"a":1,"p":100},{"c":"Masturbation","q":"What is 'frotting' between men?","o":["Massaging the prostate until fluid is released, sometimes without erection or orgasm.","Rubbing penises together without penetration.","Masturbating for hours in a trance-like state, edging without cumming.","A high-end male milking machine that sucks like a mouth."],"a":1,"p":100},{"c":"Masturbation","q":"What is the 'Venus 2000'?","o":["A high-end male milking machine that sucks like a mouth.","Rubbing penises together without penetration.","A clitoral suction vibrator shaped like a rose that went viral on TikTok.","Over 50 hours (documented online challenge)."],"a":0,"p":100},{"c":"Lesbian Sex & Culture","q":"What is a 'double-headed dildo' used for?","o":["A woman who prefers to receive sexual pleasure but not give.","The stereotype of intense emotional conflict in lesbian social circles.","Simultaneous penetration of both partners.","A lesbian who has never had sex with a man."],"a":2,"p":100},{"c":"Lesbian Sex & Culture","q":"What is 'queefing'?","o":["A masculine lesbian who prefers to give pleasure but not receive genital touch.","Another term for scissoring or any vulva-to-vulva grinding.","The stereotype of intense emotional conflict in lesbian social circles.","Vaginal flatulence caused by air being pushed in and out."],"a":3,"p":100},{"c":"Lesbian Sex & Culture","q":"What is the 'lesbian bed death' stereotype?","o":["Vaginal flatulence caused by air being pushed in and out.","Long-term lesbian couples supposedly having very little sex.","A lesbian who moves in with her partner after the second date.","A masculine lesbian who prefers to give pleasure but not receive genital touch."],"a":1,"p":100},{"c":"Gay Sex & Culture","q":"What is 'chemsex'?","o":["Sucking semen out of someones anus after ejaculation.","Using drugs (usually meth, GHB, or mephedrone) to enhance long gay sex parties.","Anal sex without a condom.","Pre-Exposure Prophylaxisa daily pill that prevents HIV."],"a":1,"p":100},{"c":"Gay Sex & Culture","q":"What is 'pig play'?","o":["Extreme raunchy sex involving piss, spit, fisting, and no limits.","Rare fetish where HIV-negative men actively seek to become infected.","A gay sex club with private rooms, saunas, and dark rooms for anonymous sex.","Sucking semen out of someones anus after ejaculation."],"a":0,"p":100},{"c":"Gay Sex & Culture","q":"What is 'bug chasing'?","o":["Inserting the entire hand (or more) into the anus.","Rare fetish where HIV-negative men actively seek to become infected.","Inserting metal or silicone rods into the urethra for pleasure.","A hole in a wall through which anonymous oral or anal sex occurs."],"a":1,"p":100},{"c":"STIs & Sexual Health","q":"What is 'Undetectable = Untransmittable' (U=U)?","o":["Yespharyngeal gonorrhea from oral sex.","Nearly 100% against the strains it covers.","HIV-positive people with undetectable viral load cannot transmit HIV sexually.","As early as 1014 days with nucleic acid tests."],"a":2,"p":100},{"c":"STIs & Sexual Health","q":"What is the incubation period for syphilis?","o":["HIV-positive people with undetectable viral load cannot transmit HIV sexually.","Years, potentially causing infertility if untreated.","Abstinence (or mutual monogamy with tested partners).","1090 days (average 21 days)."],"a":3,"p":100},{"c":"STIs & Sexual Health","q":"How effective is the HPV vaccine?","o":["Taking doxycycline within 72 hours after sex to prevent bacterial STIs.","Yes, and it can cause throat cancer.","Abstinence (or mutual monogamy with tested partners).","Nearly 100% against the strains it covers."],"a":3,"p":100},{"c":"Cheating & Non-Monogamy Drama","q":"What is a 'cuckquean'?","o":["A woman who enjoys watching her man with other women.","A man who enjoys watching his partner have sex with other men, often with humiliation.","Partners agree to play separately and never discuss details.","Swinging is recreational sex; polyamory involves emotional relationships with multiple people."],"a":0,"p":100},{"c":"Cheating & Non-Monogamy Drama","q":"What is 'hierarchical polyamory'?","o":["Partners agree to play separately and never discuss details.","Having a primary partner and secondary relationships with rules.","A woman who enjoys watching her man with other women.","Swinging is recreational sex; polyamory involves emotional relationships with multiple people."],"a":1,"p":100},{"c":"Fluid Swapping & Extreme Play","q":"What is 'rosebudding'?","o":["Two penises in the same anus at the same time.","Fantasizing or role-playing impregnation, often with bareback creampies.","Ejaculating inside a vagina or anus (often followed by eating it).","When the rectal mucosa prolapses and 'blooms' out like a rose during extreme anal play."],"a":3,"p":100},{"c":"Fluid Swapping & Extreme Play","q":"What is 'double anal' (DA)?","o":["Gangbang = multiple men taking turns penetrating; bukkake gangbang = all finish on face/body.","Sucking cum out of an ass using a straw (extreme version).","Urinating on or in a partner.","Two penises in the same anus at the same time."],"a":3,"p":100},{"c":"Fluid Swapping & Extreme Play","q":"What is 'piss play' / watersports?","o":["Gangbang = multiple men taking turns penetrating; bukkake gangbang = all finish on face/body.","When the rectal mucosa prolapses and 'blooms' out like a rose during extreme anal play.","Urinating on or in a partner.","Two penises in the same anus at the same time."],"a":2,"p":100},{"c":"Extreme & Edge Play","q":"What is 'fire play'?","o":["Inserting a peeled ginger root into the anus or vagina for burning sensation play.","Restricting oxygen (choking, bagging) for heightened orgasmconsidered high-risk.","Using flash cotton or alcohol flames briefly on the skin.","Using knives or blades on the skin for psychological or light cutting play (with strict safety)."],"a":2,"p":100},{"c":"Extreme & Edge Play","q":"What is 'cannibalism roleplay' in extreme BDSM?","o":["Using TENS units or violet wands to send electric currents through the body.","Using flash cotton or alcohol flames briefly on the skin.","Consensual fantasy involving being 'eaten' (usually with knives and blood).","Wrapping someone completely in plastic wrap or pallet wrap for sensory deprivation."],"a":2,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What is the pineapple upside-down symbol on a cruise cabin door?","o":["Closed-door wants privacy during full swap; open-door likes being watched.","Drug and Disease Free.","A clear sign the occupants are swingers looking to play.","3555."],"a":2,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What does 'generous' mean when a single male writes it?","o":["They have vanilla jobs/friends/family and will never risk exposure.","A 'bull' if desired, or more often just 'creepy single guy' if pushy.","Hes offering money or gifts to play (usually frowned upon).","Drug and Disease Free."],"a":2,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What is the '90-day rule' some couples use?","o":["A couple thats actually attractive, drama-free, and good in bed.","When one partner plays with someone theyre not attracted to so their partner can play with someone they want.","No playing with the same couple more than once every 90 days to prevent feelings.","Bi-curious = willing to kiss or touch women for fun; bi-sexual = actively wants to go down on women."],"a":2,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What is 'the swinger handshake'?","o":["Height-Weight Proportional.","Big Black Cock (used by couples seeking well-endowed black men).","A subtle pinky-ring touch or wrist squeeze used to identify each other discreetly.","Male-Female-Male (two men, one woman) and Female-Male-Female (two women, one man)."],"a":2,"p":100},{"c":"Swinger Lifestyle & Etiquette","q":"What does 'clean DDF' mean?","o":["A subtle pinky-ring touch or wrist squeeze used to identify each other discreetly.","Couples play sexually with others but only up to oral sex or touchingno full penetration with others.","Drug and Disease Free.","Permission from a partner to have sex with someone else without them present."],"a":2,"p":100}];
        const TF_QUESTIONS = [];
        const NHIE_DATA = ["Never have I ever had sex in a public place.", "Never have I ever swapped partners without talking about it first.", "Never have I ever used a safe word.", "Never have I ever had a threesome."];
        const WHEEL_SLICES = ["Remove 1 Item", "Take a Shot", "Lap Dance (30s)", "Truth or Dare", "Kiss Host", "Spank Left", "Show Tattoo", "Safe!"];

        const generateFullQuestionSet = () => { return []; };
        
        // Use v25 to ensure fresh storage and sync
        const STORAGE_KEY = 'hr_platinum_db_v25';
        const OLD_STORAGE_KEY = 'adult_trivia_custom_q'; // Backward compatibility

        const Game = {
            state: { screen: 'setup', players: [], currentQ: 0, turn: 0, questions: [], uploadedQuestions: [], lastImportName: "None", customGif: null, winScore: 10, mobileView: false, interludeFreq: 5, currentWheelRotation: 0 },
            
            init() {
                // 1. Try New Storage
                let saved = localStorage.getItem(STORAGE_KEY);
                
                // 2. Fallback: Try Old Storage & Migrate
                if(!saved) {
                    const oldSaved = localStorage.getItem(OLD_STORAGE_KEY);
                    if(oldSaved) {
                        try {
                            const parsed = JSON.parse(oldSaved);
                            if(Array.isArray(parsed) && parsed.length > 0) {
                                // Validate/Repair if needed
                                const repaired = this.processRawQuestions(parsed);
                                localStorage.setItem(STORAGE_KEY, JSON.stringify(repaired));
                                saved = JSON.stringify(repaired);
                                showToast("Migrated saved data to v25 format.");
                            }
                        } catch(e) { console.error("Migration failed", e); }
                    }
                }

                // 3. Load Data
                if(saved) { 
                    try { 
                        const parsed = JSON.parse(saved); 
                        if(Array.isArray(parsed) && parsed.length > 0) { 
                            // Auto-repair check
                            if(!parsed[0].o || !Array.isArray(parsed[0].o)) {
                                console.log("Detected raw data. Repairing...");
                                const repaired = this.processRawQuestions(parsed);
                                this.state.uploadedQuestions = repaired;
                                MC_QUESTIONS = MC_QUESTIONS.concat(repaired);
                                localStorage.setItem(STORAGE_KEY, JSON.stringify(repaired)); // Update storage
                                showToast(`Restored & Fixed ${repaired.length} saved questions.`);
                            } else {
                                this.state.uploadedQuestions = parsed; 
                                MC_QUESTIONS = MC_QUESTIONS.concat(parsed); 
                                showToast(`Welcome back! ${parsed.length} questions loaded.`);
                            }
                            // AUTO-BYPASS SPLASH SCREEN IF DATA EXISTS
                            this.bypassSplash();
                        } 
                    } catch(e) { console.error("Load error", e); } 
                }

                const savedGif = localStorage.getItem('adult_trivia_gif'); if(savedGif) this.state.customGif = savedGif;
                window.renderIcons = () => { if(window.lucide) window.lucide.createIcons(); }; window.renderIcons();
                this.initWheel(); this.bindEvents(); this.updateDbStats();
            },

            // New feature to skip splash screen
            bypassSplash() {
                document.getElementById('splash').style.display = 'none';
                document.getElementById('app').classList.remove('hidden');
                this.renderSetup();
            },

            // SHARED LOGIC: Converts Raw JSON (questions/answers) -> Game Format (q/o/a/c)
            processRawQuestions(sourceArray) {
                // 1. COLLECT DISTRACTORS
                const answersByCategory = {};
                const allAnswers = [];
                
                sourceArray.forEach(q => {
                    const cat = q.category || q.c || "General";
                    const ans = q.answer || q.correct_answer || q.a_text || (q.o && q.a !== undefined ? q.o[q.a] : null);
                    if(ans && typeof ans === 'string') {
                        if(!answersByCategory[cat]) answersByCategory[cat] = [];
                        answersByCategory[cat].push(ans);
                        allAnswers.push(ans);
                    }
                });

                const shuffleArray = (array) => {
                    for (let i = array.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [array[i], array[j]] = [array[j], array[i]];
                    }
                    return array;
                };

                // 2. CONVERT
                return sourceArray.map(q => {
                    if(q.q && q.o && Array.isArray(q.o) && typeof q.a === 'number') return q;

                    const qText = q.question || q.q || q.text || q.question_text;
                    const cAnswer = q.answer || q.correct_answer || q.correct;
                    if(!qText || !cAnswer) return null;

                    const cat = q.category || q.c || "General";

                    let wrongPool = (answersByCategory[cat] || []).filter(a => a !== cAnswer);
                    if(wrongPool.length < 3) wrongPool = allAnswers.filter(a => a !== cAnswer);
                    
                    wrongPool = shuffleArray([...wrongPool]);
                    const wrongs = wrongPool.slice(0, 3);
                    while(wrongs.length < 3) wrongs.push("Pass");

                    let options = [cAnswer, ...wrongs];
                    options = shuffleArray(options);

                    return { c: cat, q: qText, o: options, a: options.indexOf(cAnswer), p: 100 };
                }).filter(x => x !== null);
            },

            initWheel() {
                const wheel = document.getElementById('the-wheel'); if(!wheel) return;
                wheel.innerHTML = '';
                const sliceAngle = 360 / WHEEL_SLICES.length;
                WHEEL_SLICES.forEach((text, i) => {
                    const angle = i * sliceAngle + (sliceAngle / 2) - 90;
                    const div = document.createElement('div'); div.className = 'wheel-text'; div.style.transform = `rotate(${angle}deg)`; div.innerText = text;
                    wheel.appendChild(div);
                });
            },

            bindEvents() {
                const btn = document.getElementById('btn-enter');
                if(btn) btn.addEventListener('click', () => {
                    AudioSys.init(); AudioSys.play('click');
                    document.getElementById('splash').style.opacity = 0;
                    setTimeout(() => { 
                        document.getElementById('splash').classList.add('hidden'); 
                        document.getElementById('app').classList.remove('hidden'); 
                        this.renderSetup(); 
                    }, 500);
                });
                document.getElementById('btn-sound').addEventListener('click', (e) => {
                    AudioSys.enabled = !AudioSys.enabled; e.currentTarget.innerHTML = AudioSys.enabled ? '<i data-lucide="volume-2"></i>' : '<i data-lucide="volume-x"></i>'; window.renderIcons();
                });
            },

            handleTeamImage(input, index) {
                const file = input.files[0]; if(file) { const reader = new FileReader(); reader.onload = (e) => { const img = document.getElementById(`team-img-${index}`); if(img) { img.src = e.target.result; img.classList.remove('hidden'); } const icon = document.getElementById(`team-icon-${index}`); if(icon) icon.classList.add('hidden'); input.dataset.base64 = e.target.result; }; reader.readAsDataURL(file); }
            },

            handleGifUpload(input) {
                const file = input.files[0]; if(!file) return;
                if(!file.type.match('image.*')) { showToast("Please upload an image file (GIF, PNG, JPG)"); return; }
                const reader = new FileReader();
                reader.onload = (e) => {
                    this.state.customGif = e.target.result;
                    try { localStorage.setItem('adult_trivia_gif', this.state.customGif); showToast("Theme GIF updated!");
                        const headerIcon = document.getElementById('header-icon-container'); if(headerIcon) { headerIcon.innerHTML = `<img src="${this.state.customGif}" class="w-full h-full object-cover rounded">`; headerIcon.classList.remove('bg-gradient-to-br', 'from-slate-700', 'to-slate-900', 'border-slate-600'); headerIcon.classList.add('border-none'); }
                        if(this.state.screen === 'play') this.renderGame();
                    } catch (err) { alert("Image too large for local storage, but will work for this session."); }
                };
                reader.readAsDataURL(file); input.value = '';
            },

            handleFileUpload(input) {
                const files = input.files; if(!files.length) return;
                let promises = []; let rejectedCount = 0;
                
                const shuffleArray = (array) => {
                    for (let i = array.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [array[i], array[j]] = [array[j], array[i]];
                    }
                    return array;
                };

                Array.from(files).forEach(file => {
                    if (!file.name.toLowerCase().endsWith('.json')) { rejectedCount++; return; }
                    promises.push(new Promise(resolve => { 
                        const r = new FileReader(); 
                        r.onload = e => { 
                            try { 
                                const raw = JSON.parse(e.target.result);
                                
                                let sourceArray = [];
                                if (Array.isArray(raw)) {
                                    sourceArray = raw;
                                } else if (raw.questions && Array.isArray(raw.questions)) {
                                    sourceArray = raw.questions;
                                } else if (raw.data && Array.isArray(raw.data)) {
                                    sourceArray = raw.data;
                                } else {
                                    const keys = Object.keys(raw);
                                    for(let k of keys) {
                                        if(Array.isArray(raw[k])) {
                                            sourceArray = raw[k];
                                            break;
                                        }
                                    }
                                }
                                
                                if(sourceArray.length === 0) {
                                    console.error("No questions array found in JSON.");
                                    resolve([]);
                                    return;
                                }

                                // Use shared logic for consistent conversion
                                const processed = this.processRawQuestions(sourceArray);
                                resolve(processed); 

                            } catch (err) { 
                                console.error("JSON Parse Error:", err);
                                resolve([]); 
                            } 
                        }; 
                        r.readAsText(file); 
                    }));
                });

                Promise.all(promises).then(results => {
                    let totalNew = 0; 
                    results.forEach(arr => { 
                        this.state.uploadedQuestions = this.state.uploadedQuestions.concat(arr); 
                        MC_QUESTIONS = MC_QUESTIONS.concat(arr); 
                        totalNew += arr.length; 
                    });
                    
                    if (totalNew > 0) { 
                        // FIXED: Save to the correct key!
                        localStorage.setItem(STORAGE_KEY, JSON.stringify(this.state.uploadedQuestions)); 
                        this.state.lastImportName = results.length > 1 ? `Batch of ${results.length} files` : results[0].name; 
                    }
                    
                    let msg = `Success! Imported ${totalNew} questions.`; 
                    if (rejectedCount > 0) msg += `\n(${rejectedCount} files skipped)`; 
                    
                    if(totalNew === 0 && rejectedCount === 0) {
                        showToast("Error: File uploaded but no readable questions found.");
                    } else {
                        showToast(msg); 
                        // If successfully imported, we can likely skip splash now too if user is still there
                        if(document.getElementById('splash').style.display !== 'none') {
                            this.bypassSplash();
                        }
                    }
                    this.updateDbStats();
                });
                input.value = '';
            },

            toggleDbModal() { const m = document.getElementById('db-modal'); const c = document.getElementById('db-modal-content'); if(m.classList.contains('active')) { m.classList.remove('active'); c.classList.remove('scale-100', 'opacity-100'); c.classList.add('scale-95', 'opacity-0'); } else { this.updateDbStats(); m.classList.add('active'); setTimeout(() => { c.classList.remove('scale-95', 'opacity-0'); c.classList.add('scale-100', 'opacity-100'); }, 10); } },
            showDatabaseStats() { this.toggleDbModal(); },
            updateDbStats() { const all = generateFullQuestionSet().concat(MC_QUESTIONS); document.getElementById('db-count').textContent = all.length; document.getElementById('db-last-import').textContent = this.state.lastImportName; const counts = {}; all.forEach(x => counts[x.c||'Uncategorized'] = (counts[x.c||'Uncategorized']||0)+1); document.getElementById('db-categories').innerHTML = Object.entries(counts).sort((a,b)=>b[1]-a[1]).map(([k,v])=>`<div class="flex justify-between border-b border-slate-700 pb-1"><span>${k}</span><span class="text-cyan-500">${v}</span></div>`).join(''); },
            downloadUpdatedApp() {
                const html = document.documentElement.outerHTML; const jsonQ = JSON.stringify(MC_QUESTIONS); const regexQ = /(var\s+MC_QUESTIONS\s*=\s*)\[[\s\S]*?\];/;
                let newHtml = html.replace(regexQ, `var MC_QUESTIONS = ${jsonQ};`);
                if(this.state.customGif) { const gifScript = `localStorage.setItem('adult_trivia_gif', '${this.state.customGif}');`; newHtml = newHtml.replace('window.onload = () => Game.init();', `window.onload = () => { ${gifScript} Game.init(); };`); }
                const blob = new Blob([newHtml], {type:'text/html'}); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = 'HighRoller_Platinum_v25.html'; document.body.appendChild(a); a.click(); document.body.removeChild(a);
            },
            toggleMobileView() { this.state.mobileView = !this.state.mobileView; if(this.state.screen==='play') this.renderGame(); },
            toggleCustomModal() { const m = document.getElementById('custom-modal'); const c = document.getElementById('modal-content'); if(m.classList.contains('active')) { m.classList.remove('active'); c.classList.remove('scale-100', 'opacity-100'); c.classList.add('scale-95', 'opacity-0'); } else { m.classList.add('active'); setTimeout(()=>{c.classList.remove('scale-95','opacity-0');c.classList.add('scale-100','opacity-100');},10); } },
            toggleCustomType() { const t = document.getElementById('cust-type').value; document.getElementById('cust-multi-inputs').className = t==='tf'?'hidden':'grid grid-cols-2 gap-3'; document.getElementById('cust-tf-inputs').className = t==='tf'?'block':'hidden'; },
            addCustomQuestion() {
                const type = document.getElementById('cust-type').value; const cat = document.getElementById('cust-cat').value; const txt = document.getElementById('cust-q').value; let newQ = null;
                if(type==='tf') { const val = document.querySelector('input[name="cust-tf-val"]:checked').value==='true'; if(txt) newQ = {c:cat, q:"True or False: "+txt, o:["True","False"], a:val?0:1, p:50}; }
                else { const ac = document.getElementById('cust-ans-correct').value; const w1 = document.getElementById('cust-ans-w1').value; const w2 = document.getElementById('cust-ans-w2').value || "Pass"; const w3 = document.getElementById('cust-ans-w3').value || "Skip"; if(txt&&ac&&w1) { const opts = [ac,w1,w2,w3].sort(()=>Math.random()-0.5); newQ = {c:cat, q:txt, o:opts, a:opts.indexOf(ac), p:200}; } }
                if(newQ) { this.state.questions.splice(this.state.currentQ+1, 0, newQ); MC_QUESTIONS.push(newQ); this.toggleCustomModal(); } else alert("Missing info");
            },

            // --- WHEEL ---
            toggleWheelModal() {
                const m = document.getElementById('wheel-modal'); const c = document.getElementById('wheel-modal-content');
                const overlay = document.getElementById('wheel-result-overlay');
                const spinBtn = document.getElementById('spin-btn');

                if(m.classList.contains('active')) { 
                    m.classList.remove('active'); c.classList.remove('scale-100', 'opacity-100'); c.classList.add('scale-95', 'opacity-0');
                    // Reset internals
                    setTimeout(() => { overlay.classList.add('hidden'); spinBtn.classList.remove('hidden'); }, 300);
                } else { 
                    this.initWheel(); 
                    // Force reset state on open
                    overlay.classList.add('hidden'); spinBtn.classList.remove('hidden');
                    m.classList.add('active'); setTimeout(() => { c.classList.remove('scale-95', 'opacity-0'); c.classList.add('scale-100', 'opacity-100'); }, 10); 
                }
            },
            spinWheel() {
                const wheel = document.getElementById('the-wheel');
                const spinBtn = document.getElementById('spin-btn');
                const overlay = document.getElementById('wheel-result-overlay');
                const modal = document.getElementById('wheel-modal');
                
                spinBtn.classList.add('hidden');
                AudioSys.play('spin');
                
                this.state.currentWheelRotation += (5 * 360) + Math.floor(Math.random() * 360);
                wheel.style.transform = `rotate(${this.state.currentWheelRotation}deg)`;
                
                const sliceSize = 360 / WHEEL_SLICES.length;
                const index = Math.floor(((360 - (this.state.currentWheelRotation % 360)) % 360) / sliceSize);
                const result = WHEEL_SLICES[index % WHEEL_SLICES.length];
                
                setTimeout(() => {
                    // Safety check: Only show result if modal is still open
                    if(modal.classList.contains('active')) {
                        document.getElementById('outcome-text').innerText = result;
                        overlay.classList.remove('hidden'); 
                        AudioSys.play('win');
                        confetti({particleCount: 80, spread: 90, origin: { y: 0.6 }});
                    }
                }, 4000);
            },

            startGame(names, goal, avatars) {
                this.state.players = names.map((n, i) => ({
                    id: i,
                    name: n,
                    score: 0,
                    corrects: 0,
                    image: avatars[i] || null
                }));
                this.state.winScore = goal;

                // Build full deck (ONLY from uploaded/stored JSON now)
                let full = MC_QUESTIONS;

                // --- EMPTY CHECK ---
                if (full.length === 0) {
                    showToast("No questions found! Please upload a JSON file first.");
                    return;
                }

                // --- NEW RANDOMIZATION LOGIC START ---
                
                // 1. Shuffle the Questions Order (Fisher-Yates)
                for (let i = full.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [full[i], full[j]] = [full[j], full[i]];
                }

                // 2. Shuffle the Answers within each Question
                full = full.map(q => {
                    // Skip True/False to keep them logical, but randomize anything else
                    if(q.c === "True/False" || !q.o || !Array.isArray(q.o)) return q;

                    // Map answers to objects to track the correct one
                    let answers = q.o.map((opt, idx) => ({
                        text: opt,
                        isCorrect: idx === q.a
                    }));

                    // Shuffle the answers array
                    for (let i = answers.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [answers[i], answers[j]] = [answers[j], answers[i]];
                    }

                    // Rebuild question object with new order and new answer index
                    return {
                        ...q,
                        o: answers.map(a => a.text),
                        a: answers.findIndex(a => a.isCorrect)
                    };
                });
                // --- NEW RANDOMIZATION LOGIC END ---

                this.state.questions = full;
                this.state.currentQ = 0;
                this.state.turn = 0;
                this.state.screen = "play";

                document
                    .getElementById("scoreboard")
                    .classList.remove("hidden", "translate-y-full");

                this.renderGame();
            },

            handleAnswer(idx) {
                const q = this.state.questions[this.state.currentQ];
                const p = this.state.players[this.state.turn];
                const isCorrect = idx === q.a;
                document.querySelectorAll('.opt-btn').forEach(b=>b.disabled=true);
                const selectedBtn = document.getElementById(`opt-${idx}`);
                
                if(isCorrect) {
                    AudioSys.play('correct');
                    selectedBtn.classList.remove('bg-slate-900/80', 'hover:bg-slate-800', 'border-slate-700', 'hover:border-cyan-500');
                    selectedBtn.classList.add('bg-green-700/70', 'border-green-400', 'text-white', 'ring-2', 'ring-offset-2', 'ring-green-500', 'ring-offset-slate-950');
                    p.score += q.p; p.corrects++;
                } else {
                    AudioSys.play('wrong');
                    selectedBtn.classList.remove('bg-slate-900/80', 'hover:bg-slate-800', 'border-slate-700', 'hover:border-cyan-500');
                    selectedBtn.classList.add('bg-red-700/70', 'border-red-400', 'text-white');
                    const correctBtn = document.getElementById(`opt-${q.a}`);
                    correctBtn.classList.remove('bg-slate-900/80', 'hover:bg-slate-800', 'border-slate-700', 'hover:border-cyan-500');
                    correctBtn.classList.add('bg-green-700/70', 'border-green-400', 'text-white', 'ring-2', 'ring-offset-2', 'ring-green-500', 'ring-offset-slate-950');
                }
                this.renderScoreboardContent(); 
                if(p.corrects >= this.state.winScore) { setTimeout(() => this.renderWin(p), 2000); return; }
                setTimeout(() => {
                    this.state.currentQ++; this.state.turn = (this.state.turn+1)%this.state.players.length;
                    if(this.state.currentQ > 0 && this.state.currentQ % this.state.interludeFreq === 0) { this.renderInterlude(); } else { this.renderGame(); }
                }, 2500);
            },

            renderInterlude() {
                const main = document.getElementById('main-content');
                const prompt = NHIE_DATA[Math.floor(Math.random() * NHIE_DATA.length)];
                AudioSys.play('gong');
                main.innerHTML = `<div class="w-full max-w-2xl mx-auto animate-slide-up px-4 mt-10"><div class="nhie-card p-8 md:p-12 rounded-2xl text-center relative overflow-hidden"><div class="absolute top-0 left-0 w-full h-2 bg-pink-400"></div><div class="mb-6"><span class="bg-pink-900/50 text-pink-200 px-4 py-1 rounded-full text-xs font-bold uppercase tracking-[0.2em] border border-pink-500/30">Interlude</span></div><h2 class="text-4xl md:text-6xl font-black text-white mb-6 drop-shadow-lg uppercase leading-tight">NEVER HAVE I EVER...</h2><p class="text-xl md:text-2xl text-pink-100 mb-10 font-medium leading-relaxed">"${prompt}"</p><div class="flex justify-center gap-4"><button type="button" onclick="Game.renderGame()" class="bg-white text-pink-900 px-8 py-3 rounded-full font-bold hover:bg-gray-200 transition-colors shadow-lg flex items-center gap-2">Resume Game</button></div><p class="mt-6 text-xs text-pink-300/70 uppercase tracking-widest">Drink if you have done this</p></div></div>`;
                window.renderIcons();
            },

            renderSetup() {
                const main = document.getElementById('main-content');
                main.innerHTML = `<div class="glass-panel p-8 max-w-lg mx-auto animate-slide-up border-t-4 border-cyan-500"><h3 class="text-3xl font-black text-center mb-8 text-white tracking-widest uppercase">Registration</h3><div id="inputs-area" class="space-y-4 mb-8"><div class="flex gap-2 items-center animate-slide-up"><label class="w-12 h-12 flex-shrink-0 bg-slate-800 border border-slate-600 rounded cursor-pointer overflow-hidden hover:border-cyan-500 transition relative group avatar-container"><input type="file" class="hidden team-img-input" accept="image/*" onchange="Game.handleTeamImage(this, 0)"><img id="team-img-0" class="team-avatar hidden"><div id="team-icon-0" class="absolute inset-0 flex items-center justify-center text-slate-500 group-hover:text-cyan-400"><i data-lucide="camera" class="w-5 h-5"></i></div></label><input type="text" class="w-full input-dark rounded p-3 text-lg player-input" value="Team Platinum"></div><div class="flex gap-2 items-center animate-slide-up" style="animation-delay: 0.1s"><label class="w-12 h-12 flex-shrink-0 bg-slate-800 border border-slate-600 rounded cursor-pointer overflow-hidden hover:border-cyan-500 transition relative group avatar-container"><input type="file" class="hidden team-img-input" accept="image/*" onchange="Game.handleTeamImage(this, 1)"><img id="team-img-1" class="team-avatar hidden"><div id="team-icon-1" class="absolute inset-0 flex items-center justify-center text-slate-500 group-hover:text-cyan-400"><i data-lucide="camera" class="w-5 h-5"></i></div></label><input type="text" class="w-full input-dark rounded p-3 text-lg player-input" value="Team Noir"></div></div><button type="button" id="add-btn" class="text-xs font-bold text-slate-400 hover:text-white mb-8 flex items-center justify-center gap-2 w-full py-3 border border-dashed border-slate-700 rounded hover:border-slate-500 transition"><i data-lucide="plus-circle" class="w-4 h-4"></i> ADD ANOTHER TEAM</button><div class="mb-8"><label class="block text-xs font-bold text-slate-500 mb-3 uppercase tracking-widest">Winning Score</label><div class="grid grid-cols-3 gap-2">${[5, 10, 25].map((n, i) => `<label class="cursor-pointer"><input type="radio" name="goal" value="${n}" class="hidden peer" ${i===1?'checked':''}><div class="py-3 text-center border border-slate-700 bg-slate-800 peer-checked:bg-cyan-600 peer-checked:border-cyan-400 peer-checked:text-white text-slate-400 transition-all font-bold rounded-sm">${n}</div></label>`).join('')}</div><button type="button" id="go-btn" class="btn-silver w-full py-4 text-xl font-black uppercase tracking-[0.2em] shadow-lg rounded-sm">Deal The Cards</button></div>`;
                window.renderIcons();
                document.getElementById('add-btn').addEventListener('click', () => {
                    const area = document.getElementById('inputs-area'); const idx = area.children.length;
                    if (idx < 6) { const div = document.createElement('div'); div.className = "flex gap-2 items-center animate-slide-up"; div.innerHTML = `<label class="w-12 h-12 flex-shrink-0 bg-slate-800 border border-slate-600 rounded cursor-pointer overflow-hidden hover:border-cyan-500 transition relative group avatar-container"><input type="file" class="hidden team-img-input" accept="image/*" onchange="Game.handleTeamImage(this, ${idx})"><img id="team-img-${idx}" class="team-avatar hidden"><div id="team-icon-${idx}" class="absolute inset-0 flex items-center justify-center text-slate-500 group-hover:text-cyan-400"><i data-lucide="camera" class="w-5 h-5"></i></div></label><input type="text" class="w-full input-dark rounded p-3 text-lg player-input" placeholder="Team Name">`; area.appendChild(div); window.renderIcons(); }
                });
                document.getElementById('go-btn').addEventListener('click', () => {
                    const nameInputs = document.querySelectorAll('.player-input'); const fileInputs = document.querySelectorAll('.team-img-input');
                    let names = []; let avatars = [];
                    nameInputs.forEach((inp, i) => { if(inp.value.trim()) { names.push(inp.value.trim()); avatars.push(fileInputs[i].dataset.base64 || null); } });
                    const goal = parseInt(document.querySelector('input[name="goal"]:checked').value);
                    if(names.length < 2) return alert("Minimum 2 Teams Required.");
                    AudioSys.play('click'); this.startGame(names, goal, avatars);
                });
            },

            renderGame() {
                const q = this.state.questions[this.state.currentQ];
                const p = this.state.players[this.state.turn];
                const main = document.getElementById('main-content');
                const isMob = this.state.mobileView;
                const grid = isMob ? "grid-cols-1" : "grid-cols-1 md:grid-cols-2";
                let themeGifHtml = ''; if(this.state.customGif) themeGifHtml = `<img src="${this.state.customGif}" class="theme-gif animate-float">`;
                let avatarHtml = p.image ? `<div class="mx-auto mb-6 relative group perspective"><div class="w-48 h-48 md:w-64 md:h-64 mx-auto rounded-full p-2 bg-gradient-to-b from-slate-200 to-slate-500 shadow-[0_0_30px_rgba(255,255,255,0.2)]"><img src="${p.image}" class="w-full h-full object-cover rounded-full border-4 border-slate-900 shadow-inner"></div><div class="absolute -bottom-3 left-1/2 transform -translate-x-1/2 bg-cyan-600 text-white px-4 py-1 rounded-full text-xs font-bold uppercase tracking-widest shadow-lg border border-cyan-400">Current Turn</div></div>` : `<div class="mx-auto mb-6 text-center"><div class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-slate-800 border border-slate-600 shadow-xl mb-2"><i data-lucide="user" class="w-8 h-8 text-slate-400"></i></div><div class="text-xs text-slate-500 uppercase tracking-widest">Current Turn</div></div>`;

                main.innerHTML = `<div class="w-full max-w-4xl mx-auto animate-slide-up ${isMob?'px-2':''}">${themeGifHtml}<div class="flex justify-between items-end mb-4 px-4 border-b border-slate-800 pb-4"><div><span class="text-[10px] text-slate-500 uppercase font-bold tracking-widest block">Question</span><span class="text-xl font-black text-white">#${this.state.currentQ+1}</span></div><div class="text-center"><span class="bg-cyan-900/30 text-cyan-400 px-4 py-1 rounded-sm text-xs uppercase font-bold tracking-widest border border-cyan-500/30 shadow-[0_0_10px_rgba(6,182,212,0.2)]">${q.c}</span></div><div class="text-right"><span class="text-[10px] text-slate-500 uppercase font-bold tracking-widest block">Value</span><span class="text-xl font-black text-yellow-500 drop-shadow-md">${q.p}</span></div></div><div id="question-card" class="glass-panel p-8 md:p-12 mb-8 relative overflow-hidden group"><div class="absolute top-0 right-0 -mt-10 -mr-10 w-40 h-40 bg-white/5 rounded-full blur-3xl group-hover:bg-cyan-500/10 transition duration-700"></div><h2 class="text-2xl md:text-4xl font-bold leading-tight relative z-10 text-white drop-shadow-lg text-center font-display">${q.q}</h2></div>${avatarHtml}<h3 class="text-center text-2xl font-black text-metallic mb-8 uppercase tracking-widest shadow-black drop-shadow-md">${p.name}</h3><div class="grid ${grid} gap-4">${q.o.map((opt, i) => `<button type="button" id="opt-${i}" class="opt-btn relative w-full text-left p-5 bg-slate-900/80 hover:bg-slate-800 border border-slate-700 hover:border-cyan-500 transition-all group overflow-hidden"><div class="absolute inset-0 w-1 bg-cyan-500 transform -translate-x-full group-hover:translate-x-0 transition-transform duration-300"></div><div class="flex items-center gap-4 relative z-10"><span class="font-mono text-slate-500 group-hover:text-cyan-400 font-bold text-lg transition-colors">0${i+1}</span><span class="text-slate-300 group-hover:text-white font-medium text-lg leading-snug">${opt}</span></div></button>`).join('')}</div>`;
                window.renderIcons();
                q.o.forEach((_, i) => document.getElementById(`opt-${i}`).addEventListener('click', () => this.handleAnswer(i)));
                this.renderScoreboardContent();
            },

            renderScoreboardContent() {
                const c = document.getElementById('score-container'); if(!c) return;
                c.innerHTML = this.state.players.map((p, i) => {
                    const active = i === this.state.turn;
                    let miniImg = p.image ? `<img src="${p.image}" class="w-8 h-8 rounded-full border border-slate-500 object-cover">` : `<div class="w-8 h-8 rounded-full bg-slate-800 border border-slate-600 flex items-center justify-center"><i data-lucide="user" class="w-4 h-4 text-slate-500"></i></div>`;
                    return `<div class="flex-shrink-0 bg-slate-900/90 backdrop-blur px-5 py-3 border-t-2 ${active ? 'border-cyan-500 bg-slate-800 shadow-[0_-4px_15px_rgba(6,182,212,0.2)]' : 'border-transparent'} min-w-[140px] flex items-center gap-3 transition-all">${miniImg}<div><div class="text-[10px] text-slate-400 font-bold uppercase tracking-wider truncate max-w-[90px]">${p.name}</div><div class="font-black text-xl text-white leading-none">${p.score}</div></div></div>`
                }).join('');
                window.renderIcons();
            },

            renderWin(winner) {
                document.getElementById('scoreboard').classList.add('translate-y-full');
                AudioSys.play('win');
                (function f(){confetti({particleCount:5,angle:60,spread:55,origin:{x:0},colors:['#06b6d4','#cbd5e1']});confetti({particleCount:5,angle:120,spread:55,origin:{x:1},colors:['#06b6d4','#cbd5e1']});if(Date.now()<Date.now()+3000)requestAnimationFrame(f)}());
                const main = document.getElementById('main-content');
                let winImg = winner.image ? `<div class="w-40 h-40 mx-auto rounded-full p-1 bg-gradient-to-b from-yellow-300 to-yellow-600 shadow-2xl mb-6"><img src="${winner.image}" class="w-full h-full object-cover rounded-full border-4 border-black"></div>` : `<div class="inline-block p-6 rounded-full bg-yellow-400/10 mb-6 border border-yellow-500/50"><i data-lucide="trophy" size="64" class="text-yellow-400"></i></div>`;
                let themeGifHtml = ''; if(this.state.customGif) themeGifHtml = `<img src="${this.state.customGif}" class="theme-gif animate-float mb-8" style="max-height: 200px;">`;
                main.innerHTML = `<div class="text-center animate-slide-up px-4 py-10">${themeGifHtml} ${winImg}<h1 class="text-6xl font-black text-metallic mb-2 uppercase tracking-tighter">Jackpot</h1><p class="text-2xl text-cyan-400 mb-12 font-light tracking-widest uppercase">${winner.name} Takes It All</p><div class="max-w-md mx-auto bg-slate-900 border border-slate-700 p-6 rounded-sm shadow-2xl mb-10">${this.state.players.sort((a,b)=>b.score-a.score).map((p, i) => `<div class="flex justify-between items-center py-3 border-b border-slate-800 last:border-0"><div class="flex items-center gap-4"><span class="text-xl font-black ${i===0?'text-yellow-500':'text-slate-600'}">#${i+1}</span><span class="font-bold text-slate-300 uppercase tracking-wide">${p.name}</span></div><div class="text-white font-mono font-bold">${p.score}</div></div>`).join('')}</div><button type="button" id="restart-btn" class="btn-silver w-full py-4 px-12 rounded-full font-bold text-lg shadow-xl uppercase tracking-widest">New Game</button></div>`;
                window.renderIcons();
                document.getElementById('restart-btn').addEventListener('click', () => { this.state.screen = 'setup'; this.renderSetup(); });
            }
        };

        window.onload = () => Game.init();
    </script>
<script>
// ===== High-Roller DLC Marketplace Engine =====
const DLCStore = {
    STORAGE_KEY: 'highroller_dlc_v1',
    catalog: [
        {
            id: 'kink_club_v1',
            name: 'Kink Club Vol. 1',
            description: 'Fetish, BDSM and consent-forward edge questions for late-night sessions.',
            intensity: 'Spicy+',
            priceHint: '$4.99 pack',
            sizeHint: '~60 cards',
            tags: ['kink', 'fetish', 'advanced']
        },
        {
            id: 'couples_therapy_v1',
            name: 'Couples Therapy (NSFW)',
            description: 'Deep-dive intimacy prompts, trust-building dares and bedroom negotiations.',
            intensity: 'Emotional',
            priceHint: '$3.99 pack',
            sizeHint: '~40 cards',
            tags: ['couples', 'conversation', 'feelings']
        },
        {
            id: 'party_starters_v1',
            name: 'Brutal Icebreakers',
            description: 'High-energy entry-level dares and confession prompts that work in any bar.',
            intensity: 'Medium',
            priceHint: '$2.99 pack',
            sizeHint: '~40 cards',
            tags: ['party', 'bar', 'social']
        }
    ],
    owned: new Set(),

    load() {
        try {
            const raw = localStorage.getItem(this.STORAGE_KEY);
            if (raw) {
                const arr = JSON.parse(raw);
                if (Array.isArray(arr)) {
                    this.owned = new Set(arr);
                }
            }
        } catch (e) {
            console.warn('DLC load failed', e);
        }
    },

    save() {
        try {
            localStorage.setItem(this.STORAGE_KEY, JSON.stringify(Array.from(this.owned)));
        } catch (e) {
            console.warn('DLC save failed', e);
        }
    },

    isOwned(id) {
        return this.owned.has(id);
    },

    purchase(id) {
        if (this.isOwned(id)) return;
        const pack = this.catalog.find(p => p.id === id);
        if (!pack) return;
        const ok = confirm(
            `Demo unlock only\n\nPack: ${pack.name}\n${pack.description}\n\nThis will mark the pack as OWNED in local storage so you can test flows. Real payments would be wired to Stripe / Paddle etc.`
        );
        if (!ok) return;
        this.owned.add(id);
        this.save();
        this.refreshModal();
    },

    buildModal() {
        if (document.getElementById('dlc-modal')) return;

        const backdrop = document.createElement('div');
        backdrop.id = 'dlc-modal';
        backdrop.className = 'modal-backdrop';
        backdrop.innerHTML = `
            <div class="glass-panel rounded-2xl max-w-lg w-full mx-4 shadow-2xl border border-cyan-500/40 transform transition scale-95">
                <div class="flex justify-between items-center border-b border-slate-700 px-6 py-4">
                    <div>
                        <div class="text-xs uppercase tracking-[0.2em] text-cyan-500 font-bold">DLC Marketplace</div>
                        <h3 class="text-2xl font-black text-white leading-tight">High-Roller Content Packs</h3>
                    </div>
                    <button type="button" id="dlc-close" class="p-2 rounded-full hover:bg-slate-800 text-slate-400 hover:text-white transition">
                        <i data-lucide="x" class="w-4 h-4"></i>
                    </button>
                </div>
                <div class="px-6 py-4 space-y-4 max-h-96 overflow-y-auto" id="dlc-list"></div>
                <div class="px-6 py-3 border-t border-slate-700 text-[11px] text-slate-500 space-y-1">
                    <p><span class="text-cyan-400 font-semibold">Note:</span> This is a local demo store. Entitlements are stored in <code>localStorage</code> so you can prototype flows without a backend.</p>
                    <p>For production you\'d swap <span class="text-cyan-400">DLCStore.purchase()</span> with Stripe / Paddle callbacks and hydrate <span class="text-cyan-400">DLCStore.owned</span> from your API.</p>
                </div>
            </div>
        `;
        document.body.appendChild(backdrop);
        backdrop.addEventListener('click', (ev) => {
            if (ev.target === backdrop) DLCStore.hide();
        });
        document.getElementById('dlc-close').addEventListener('click', () => DLCStore.hide());
        this.refreshModal();
        if (window.renderIcons) window.renderIcons();
    },

    refreshModal() {
        const list = document.getElementById('dlc-list');
        if (!list) return;
        list.innerHTML = this.catalog.map(pack => {
            const owned = this.isOwned(pack.id);
            const badgeClass = owned
                ? 'bg-green-500/10 text-green-400 border-green-500/40'
                : 'bg-pink-500/5 text-pink-300 border-pink-500/40';
            const badgeLabel = owned ? 'OWNED' : 'LOCKED';
            const btnLabel = owned ? 'Installed' : 'Unlock (Demo)';
            const btnState = owned
                ? 'bg-slate-800/80 text-slate-400 cursor-default'
                : 'btn-silver text-slate-900';

            const tags = (pack.tags || []).map(t => `<span class="px-2 py-0.5 rounded-full bg-slate-900/80 border border-slate-700 text-[10px] uppercase tracking-widest">${t}</span>`).join(' ');

            return `
                <div class="border border-slate-700 rounded-xl p-4 bg-slate-900/80 shadow-lg space-y-2">
                    <div class="flex justify-between items-start gap-2">
                        <div>
                            <div class="flex items-center gap-2 mb-1">
                                <h4 class="text-sm font-bold text-white uppercase tracking-widest">${pack.name}</h4>
                                <span class="px-2 py-0.5 rounded-full text-[10px] border ${badgeClass} font-bold tracking-widest">${badgeLabel}</span>
                            </div>
                            <p class="text-xs text-slate-400 mb-1">${pack.description}</p>
                            <p class="text-[11px] text-slate-500">${pack.sizeHint}  <span class="text-cyan-400">${pack.intensity}</span>  <span>${pack.priceHint}</span></p>
                        </div>
                    </div>
                    <div class="flex justify-between items-center mt-2 gap-2">
                        <div class="flex flex-wrap gap-1">${tags}</div>
                        <button
                            type="button"
                            class="px-3 py-1.5 rounded-full text-[11px] font-bold tracking-widest uppercase ${btnState}"
                            data-pack="${pack.id}"
                            ${owned ? 'disabled' : ''}
                        >${btnLabel}</button>
                    </div>
                </div>
            `;
        }).join('');

        list.querySelectorAll('button[data-pack]').forEach(btn => {
            btn.addEventListener('click', () => {
                const id = btn.getAttribute('data-pack');
                DLCStore.purchase(id);
            });
        });
    },

    show() {
        this.buildModal();
        const el = document.getElementById('dlc-modal');
        if (!el) return;
        requestAnimationFrame(() => el.classList.add('active'));
    },

    hide() {
        const el = document.getElementById('dlc-modal');
        if (!el) return;
        el.classList.remove('active');
    },

    injectButton() {
        const header = document.querySelector('#app header .flex.gap-2');
        if (!header || document.getElementById('btn-dlc-store')) return;

        const btn = document.createElement('button');
        btn.type = 'button';
        btn.id = 'btn-dlc-store';
        btn.className = 'p-2.5 rounded hover:bg-slate-800 text-cyan-400 hover:text-cyan-300 transition border border-transparent hover:border-cyan-500/40 shadow-[0_0_10px_rgba(34,211,238,0.25)]';
        btn.title = 'DLC Marketplace';
        btn.innerHTML = '<i data-lucide="shopping-bag" class="w-5 h-5"></i>';
        btn.addEventListener('click', () => DLCStore.show());
        header.insertBefore(btn, header.firstChild);
        if (window.renderIcons) window.renderIcons();
    },

    init() {
        this.load();
        this.injectButton();
    }
};

// ===== Tournament & Bracket Engine =====
const TournamentEngine = {
    STORAGE_KEY: 'highroller_tournaments_v1',
    state: {
        active: null,   // active tournament object
        all: []         // saved tournaments
    },

    load() {
        try {
            const raw = localStorage.getItem(this.STORAGE_KEY);
            if (!raw) return;
            const parsed = JSON.parse(raw);
            if (Array.isArray(parsed)) {
                this.state.all = parsed;
                this.state.active = parsed.find(t => t.active) || null;
            }
        } catch (e) {
            console.warn('Tournament load failed', e);
        }
    },

    save() {
        try {
            const arr = this.state.all.map(t => {
                return Object.assign({}, t, { active: this.state.active && this.state.active.id === t.id });
            });
            localStorage.setItem(this.STORAGE_KEY, JSON.stringify(arr));
        } catch (e) {
            console.warn('Tournament save failed', e);
        }
    },

    newTournamentFromCurrentGame() {
        if (!window.Game || !Game.state || !Array.isArray(Game.state.players) || Game.state.players.length < 2) {
            alert('Start a normal game and register at least 2 teams first.');
            return;
        }
        const baseName = prompt('Tournament name', 'High-Roller Bracket Night');
        if (!baseName) return;

        const teams = Game.state.players.map(p => p.name);
        const size = this.nextPowerOfTwo(teams.length);
        if (size > 16) {
            alert('Tournament engine demo supports up to 16 teams.');
            return;
        }
        const paddedTeams = teams.slice();
        while (paddedTeams.length < size) paddedTeams.push('(BYE)');

        const id = 't_' + Date.now();
        const rounds = [];
        let current = paddedTeams.map((name, idx) => ({ id: 'T'+(idx+1), name }));

        while (current.length > 1) {
            const roundMatches = [];
            for (let i = 0; i < current.length; i += 2) {
                roundMatches.push({
                    id: `R${rounds.length+1}M${(i/2)+1}`,
                    a: current[i],
                    b: current[i+1] || { id: 'BYE', name: '(BYE)' },
                    winner: null
                });
            }
            rounds.push(roundMatches);
            current = roundMatches.map(m => ({ id: m.id + '_W', name: 'TBD' }));
        }

        const t = {
            id,
            name: baseName,
            createdAt: new Date().toISOString(),
            rounds,
            finished: false,
            champion: null
        };

        this.state.active = t;
        this.state.all = this.state.all.filter(x => x.id !== id).concat([t]);
        this.save();
        this.renderModal();
    },

    nextPowerOfTwo(n) {
        let p = 1;
        while (p < n) p <<= 1;
        return p;
    },

    setWinner(roundIdx, matchIdx, slot) {
        const t = this.state.active;
        if (!t) return;
        const match = t.rounds[roundIdx][matchIdx];
        const winner = slot === 'a' ? match.a : match.b;
        match.winner = winner;

        if (roundIdx + 1 < t.rounds.length) {
            const nextMatchIdx = Math.floor(matchIdx / 2);
            const nextMatch = t.rounds[roundIdx + 1][nextMatchIdx];
            if (!nextMatch) return;
            if (matchIdx % 2 === 0) {
                nextMatch.a = winner;
            } else {
                nextMatch.b = winner;
            }
        } else {
            t.finished = true;
            t.champion = winner;
        }

        this.save();
        this.renderModal();
    },

    buildModalShell() {
        if (document.getElementById('tournament-modal')) return;

        const backdrop = document.createElement('div');
        backdrop.id = 'tournament-modal';
        backdrop.className = 'modal-backdrop';
        backdrop.innerHTML = `
            <div class="glass-panel rounded-2xl max-w-3xl w-full mx-4 shadow-2xl border border-purple-500/40 transform transition scale-95">
                <div class="flex justify-between items-center border-b border-slate-700 px-6 py-4">
                    <div>
                        <div class="text-xs uppercase tracking-[0.2em] text-purple-400 font-bold">Tournament Mode</div>
                        <h3 class="text-2xl font-black text-white leading-tight">Bracket Night</h3>
                    </div>
                    <div class="flex items-center gap-2">
                        <button type="button" id="btn-t-from-current" class="px-3 py-1.5 text-[11px] rounded-full border border-slate-600 text-slate-300 hover:bg-slate-800 uppercase tracking-widest">Use Current Teams</button>
                        <button type="button" id="btn-t-close" class="p-2 rounded-full hover:bg-slate-800 text-slate-400 hover:text-white transition">
                            <i data-lucide="x" class="w-4 h-4"></i>
                        </button>
                    </div>
                </div>
                <div class="px-6 py-4 max-h-[70vh] overflow-y-auto" id="tournament-content"></div>
                <div class="px-6 py-3 border-t border-slate-700 text-[11px] text-slate-500">
                    Tip: Run each match as a normal game. When you have a winner, come back here and click that team to advance the bracket.
                </div>
            </div>
        `;
        document.body.appendChild(backdrop);
        backdrop.addEventListener('click', (ev) => {
            if (ev.target === backdrop) TournamentEngine.hide();
        });
        document.getElementById('btn-t-close').addEventListener('click', () => TournamentEngine.hide());
        document.getElementById('btn-t-from-current').addEventListener('click', () => TournamentEngine.newTournamentFromCurrentGame());
        if (window.renderIcons) window.renderIcons();
    },

    renderBracketHtml() {
        const t = this.state.active;
        if (!t) {
            return `
                <div class="text-center py-10 text-slate-400 text-sm space-y-3">
                    <p class="text-slate-300 font-semibold">No active tournament.</p>
                    <p>Click <span class="text-purple-400 font-bold">Use Current Teams</span> to auto-build a bracket from your registration screen.</p>
                </div>
            `;
        }

        const roundsHtml = t.rounds.map((round, rIdx) => {
            const title = `Round ${rIdx + 1}`;
            return `
                <div class="flex-1 min-w-[160px]">
                    <div class="text-[11px] uppercase tracking-[0.2em] text-purple-300 mb-2 font-bold">${title}</div>
                    <div class="space-y-2">
                        ${round.map((m, mIdx) => {
                            const aActive = m.winner && m.winner.id === m.a.id;
                            const bActive = m.winner && m.winner.id === m.b.id;
                            const matchLabel = m.id;
                            const disabled = m.a.name === '(BYE)' || m.b.name === '(BYE)';
                            const byeNote = disabled ? '<div class="text-[10px] text-slate-500 mt-1">Auto-advance: BYE</div>' : '';

                            return `
                                <div class="border border-slate-700 rounded-lg p-2 bg-slate-900/70">
                                    <div class="flex justify-between items-center mb-1">
                                        <span class="text-[10px] uppercase tracking-widest text-slate-500">${matchLabel}</span>
                                        ${m.winner ? `<span class="text-[10px] px-2 py-0.5 rounded-full bg-purple-500/10 text-purple-300 border border-purple-500/40 uppercase tracking-widest">Winner Locked</span>` : ''}
                                    </div>
                                    <div class="space-y-1">
                                        <button
                                            type="button"
                                            class="w-full text-left text-xs px-2 py-1 rounded border ${aActive ? 'border-green-500 bg-green-500/10 text-green-300' : 'border-slate-700 hover:border-purple-400 hover:bg-slate-800 text-slate-200'} ${disabled ? 'opacity-50 cursor-default' : ''}"
                                            data-round="${rIdx}"
                                            data-match="${mIdx}"
                                            data-slot="a"
                                            ${disabled ? 'disabled' : ''}
                                        >${m.a.name}</button>
                                        <button
                                            type="button"
                                            class="w-full text-left text-xs px-2 py-1 rounded border ${bActive ? 'border-green-500 bg-green-500/10 text-green-300' : 'border-slate-700 hover:border-purple-400 hover:bg-slate-800 text-slate-200'} ${disabled ? 'opacity-50 cursor-default' : ''}"
                                            data-round="${rIdx}"
                                            data-match="${mIdx}"
                                            data-slot="b"
                                            ${disabled ? 'disabled' : ''}
                                        >${m.b.name}</button>
                                    </div>
                                    ${byeNote}
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
            `;
        }).join('');

        const champHtml = t.finished && t.champion
            ? `<div class="mt-6 border border-yellow-500/40 rounded-xl p-3 bg-yellow-500/5">
                    <div class="text-[11px] uppercase tracking-[0.2em] text-yellow-400 mb-1 font-bold">Champion</div>
                    <div class="text-sm font-black text-white">${t.champion.name}</div>
                </div>`
            : '';

        return `
            <div class="space-y-4">
                <div>
                    <div class="text-xs uppercase tracking-[0.3em] text-slate-400 mb-1">Active Tournament</div>
                    <div class="flex justify-between items-center">
                        <h4 class="text-lg font-black text-white uppercase tracking-widest">${t.name}</h4>
                        <span class="text-[11px] text-slate-500">Created ${new Date(t.createdAt).toLocaleString()}</span>
                    </div>
                </div>
                <div class="flex gap-3 overflow-x-auto pb-2">${roundsHtml}</div>
                ${champHtml}
            </div>
        `;
    },

    renderModal() {
        this.buildModalShell();
        const content = document.getElementById('tournament-content');
        if (!content) return;
        content.innerHTML = this.renderBracketHtml();

        content.querySelectorAll('button[data-round]').forEach(btn => {
            btn.addEventListener('click', () => {
                const rIdx = parseInt(btn.getAttribute('data-round'), 10);
                const mIdx = parseInt(btn.getAttribute('data-match'), 10);
                const slot = btn.getAttribute('data-slot');
                TournamentEngine.setWinner(rIdx, mIdx, slot);
            });
        });
        if (window.renderIcons) window.renderIcons();
    },

    show() {
        this.renderModal();
        const el = document.getElementById('tournament-modal');
        if (!el) return;
        requestAnimationFrame(() => el.classList.add('active'));
    },

    hide() {
        const el = document.getElementById('tournament-modal');
        if (!el) return;
        el.classList.remove('active');
    },

    injectButton() {
        const header = document.querySelector('#app header .flex.gap-2');
        if (!header || document.getElementById('btn-tournament')) return;

        const btn = document.createElement('button');
        btn.type = 'button';
        btn.id = 'btn-tournament';
        btn.className = 'p-2.5 rounded hover:bg-slate-800 text-purple-400 hover:text-purple-300 transition border border-transparent hover:border-purple-500/40 shadow-[0_0_10px_rgba(168,85,247,0.25)]';
        btn.title = 'Tournament Bracket';
        btn.innerHTML = '<i data-lucide="swords" class="w-5 h-5"></i>';
        btn.addEventListener('click', () => TournamentEngine.show());
        header.appendChild(btn);
        if (window.renderIcons) window.renderIcons();
    },

    init() {
        this.load();
        this.injectButton();
    }
};

window.addEventListener('load', function () {
    try {
        DLCStore.init();
        TournamentEngine.init();
    } catch (e) {
        console.warn('Extended systems failed to init', e);
    }
});
</script>

</body></html>
